<!DOCTYPE html>
<!-- saved from url=(0082)https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd -->
<html lang="en" class="js-focus-visible" data-js-focus-visible=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Go: Deep dive into net package learning from TCP server - DEV Community</title>
      <meta name="last-updated" content="2025-03-14 22:21:47 UTC">
      <meta name="user-signed-in" content="false">
      <meta name="head-cached-at" content="1741990907">
      <meta name="environment" content="production">
      <link rel="stylesheet" href="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/minimal-0a971eb021d2dc2b145c1df786e1b97f418c6b2d066e79802fea980acb513937.css" media="all" id="main-minimal-stylesheet">
<link rel="stylesheet" href="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/views-1c703342dce6eac414f19ca7fd07bcf83cbe44088659758144e52e7fa1e92dd3.css" media="all" id="main-views-stylesheet">
<link rel="stylesheet" href="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/crayons-0f2fc85bc159498f8ae6fba58c460e6deba863d02d59dfa994c1954976ddb6cc.css" media="all" id="main-crayons-stylesheet">

      <script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/base-9d03ab7d486c2d56295834be6b93884d407a19243c89f39e58c14c9828e0a144.js.download" defer="defer"></script>
<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/application-7258612fccf5d56314a6e4ad1898b4f818f474c4bb3485e302428d489a769a17.js.download" defer="defer"></script>
<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/baseInitializers-b74902d56433062a87f5f1ce74769baf2a1a698772f46952b0ac72bc95c4abfd.js.download" defer="defer"></script>
<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/baseTracking-b6bf73e5ee66633e151e7d5b7c6bbccedfa4c59e3615be97b98c4c0f543ddae7.js.download" defer="defer"></script>

        <meta name="search-script" content="https://assets.dev.to/assets/Search-7dcdad3172ab4501a4598fe8b716c7a88146e79fd42256d36fb1b83e27bf77cf.js">
      
    <link rel="canonical" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd">
    <meta name="description" content="FYI: A previous title was “How Go handles network and system calls when TCP server”.           Key... Tagged with go, webdev.">
    <meta name="keywords" content="go, webdev, software, coding, development, engineering, inclusive, community">

    <meta property="og:type" content="article">
    <meta property="og:url" content="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd">
    <meta property="og:title" content="Go: Deep dive into net package learning from TCP server">
    <meta property="og:description" content="FYI: A previous title was “How Go handles network and system calls when TCP server”.           Key...">
    <meta property="og:site_name" content="DEV Community">
    <meta name="twitter:site" content="@thepracticaldev">
    <meta name="twitter:creator" content="@hgsgtk">
    <meta name="twitter:title" content="Go: Deep dive into net package learning from TCP server">
    <meta name="twitter:description" content="FYI: A previous title was “How Go handles network and system calls when TCP server”.           Key...">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:widgets:new-embed-design" content="on">
    <meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1">
      <meta property="og:image" content="https://media2.dev.to/dynamic/image/width=1000,height=500,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fhshqf8r6jmx4t5stefx4.png">
      <meta name="twitter:image:src" content="https://media2.dev.to/dynamic/image/width=1000,height=500,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fhshqf8r6jmx4t5stefx4.png">

      <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
      <link rel="icon" type="image/x-icon" href="https://media2.dev.to/dynamic/image/width=32,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png">
      <link rel="apple-touch-icon" href="https://media2.dev.to/dynamic/image/width=180,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png">
      <link rel="apple-touch-icon" sizes="152x152" href="https://media2.dev.to/dynamic/image/width=152,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png">
      <link rel="apple-touch-icon" sizes="180x180" href="https://media2.dev.to/dynamic/image/width=180,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png">
      <link rel="apple-touch-icon" sizes="167x167" href="https://media2.dev.to/dynamic/image/width=167,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png">
      <link href="https://media2.dev.to/dynamic/image/width=192,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png" rel="icon" sizes="192x192">
      <link href="https://media2.dev.to/dynamic/image/width=128,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png" rel="icon" sizes="128x128">
      <meta name="apple-mobile-web-app-title" content="dev.to">
      <meta name="application-name" content="dev.to">
      <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
      <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
      <link rel="search" href="https://dev.to/open-search.xml" type="application/opensearchdescription+xml" title="DEV Community">

      <meta property="forem:name" content="DEV Community">
      <meta property="forem:logo" content="https://media2.dev.to/dynamic/image/width=512,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png">
      <meta property="forem:domain" content="dev.to">
    
  <script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/js" async=""></script><script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/js" async=""></script><meta name="csrf-param" content="authenticity_token"><meta name="csrf-token" content="KkuBjftOG20dNTbs1TkrSPlW0LEdAA13TaTWGJXlWz2D04HFKKOxKXtKgMQbIbU1OLdgNYz1z2t0HvtmUpKT6w"><script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/Search-7dcdad3172ab4501a4598fe8b716c7a88146e79fd42256d36fb1b83e27bf77cf.js.download" defer=""></script></head>
      <body class="sans-serif-article-body default-header hide-popover-billboard" data-user-status="logged-out" data-community-name="DEV Community" data-subscription-icon="https://assets.dev.to/assets/subscription-icon-805dfa7ac7dd660f07ed8d654877270825b07a92a03841aa99a1093bd00431b2.png" data-locale="en" data-honeybadger-key="hbp_nqu4Y66HuEKlD6YRGssZuRQnPOjDm50J8Zkr" data-deployed-at="2025-03-14T21:55:27Z" data-latest-commit-id="5736696f689553e53fbaff192ce976f49b47e6cc" data-ga-tracking="UA-71991109-1" data-cookie-banner-user-context="logged_out_only" data-cookie-banner-platform-context="off" data-algolia-id="PRSOBFP46H" data-algolia-search-key="9aa7d31610cba78851c9b1f63776a9dd" data-algolia-display="true" data-dynamic-url-component="bmar11" data-ga4-tracking-id="G-TYEM8Y3JN3" data-runtime="Browser-Windows" data-loaded="true" style="">
        
        <script>
          if (navigator.userAgent === 'ForemWebView/1' || window.frameElement) {
            document.body.classList.add("hidden-shell");
          }
        </script>

        <link rel="stylesheet" href="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/minimal-0a971eb021d2dc2b145c1df786e1b97f418c6b2d066e79802fea980acb513937.css" media="all" id="secondary-minimal-stylesheet">
<link rel="stylesheet" href="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/views-1c703342dce6eac414f19ca7fd07bcf83cbe44088659758144e52e7fa1e92dd3.css" media="all" id="secondary-views-stylesheet">
<link rel="stylesheet" href="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/crayons-0f2fc85bc159498f8ae6fba58c460e6deba863d02d59dfa994c1954976ddb6cc.css" media="all" id="secondary-crayons-stylesheet">

        <div id="body-styles">
          <style>
            :root {
              --accent-brand-lighter-rgb: 80, 99, 301;
              --accent-brand-rgb: 59, 73, 223;
              --accent-brand-darker-rgb: 47, 58, 178;
            }
          </style>
        </div>
        <div id="audiocontent" data-podcast="">
          
        </div>
        <div class="navigation-progress" id="navigation-progress"></div>

<header id="topbar" class="crayons-header topbar print-hidden" style="display: block;">
  <span id="route-change-target" tabindex="-1"></span>
  <a href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#main-content" class="skip-content-link">Skip to content</a>
  <div class="crayons-header__container">
    <span class="inline-block m:hidden ">
      <button class="c-btn c-btn--icon-alone js-hamburger-trigger mx-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a9hxsm9hexat5vqx0nkn3szrf5uuuw0i" class="crayons-icon"><title id="a9hxsm9hexat5vqx0nkn3szrf5uuuw0i">Navigation menu</title>
    <path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"></path>
</svg>

      </button>
    </span>
    <a href="https://dev.to/" class="site-logo" aria-label="DEV Community Home">
    <img class="site-logo__img" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/resized_logo_UQww2soKuUsjaOGNB38o.png" style="aspect-ratio: 10 / 8" alt="DEV Community">
</a>


    <div class="crayons-header--search js-search-form" id="header-search"><form method="get" action="https://dev.to/search" role="search" accept-charset="UTF-8"><input name="utf8" type="hidden" value="✓"><div class="crayons-fields crayons-fields--horizontal"><div class="crayons-field flex-1 relative"><input id="search-input" class="crayons-header--search-input crayons-textfield" type="text" name="q" placeholder="Find related posts..." autocomplete="off" aria-label="Search term"><button type="submit" aria-label="Search" class="c-btn c-btn--icon-alone absolute inset-px right-auto mt-0 py-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" class="crayons-icon c-btn__icon" focusable="false"><path d="M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0111 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 01-1.969 5.617zm-2.006-.742A6.977 6.977 0 0018 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 004.875-1.975l.15-.15z"></path></svg></button><a class="crayons-header--search-brand-indicator" href="https://www.algolia.com/developers/?utm_source=devto&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Powered by <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="24" height="24" viewBox="0 0 500 500.34"><defs></defs><path class="cls-1" d="M250,0C113.38,0,2,110.16,.03,246.32c-2,138.29,110.19,252.87,248.49,253.67,42.71,.25,83.85-10.2,120.38-30.05,3.56-1.93,4.11-6.83,1.08-9.52l-23.39-20.74c-4.75-4.22-11.52-5.41-17.37-2.92-25.5,10.85-53.21,16.39-81.76,16.04-111.75-1.37-202.04-94.35-200.26-206.1,1.76-110.33,92.06-199.55,202.8-199.55h202.83V407.68l-115.08-102.25c-3.72-3.31-9.43-2.66-12.43,1.31-18.47,24.46-48.56,39.67-81.98,37.36-46.36-3.2-83.92-40.52-87.4-86.86-4.15-55.28,39.65-101.58,94.07-101.58,49.21,0,89.74,37.88,93.97,86.01,.38,4.28,2.31,8.28,5.53,11.13l29.97,26.57c3.4,3.01,8.8,1.17,9.63-3.3,2.16-11.55,2.92-23.6,2.07-35.95-4.83-70.39-61.84-127.01-132.26-131.35-80.73-4.98-148.23,58.18-150.37,137.35-2.09,77.15,61.12,143.66,138.28,145.36,32.21,.71,62.07-9.42,86.2-26.97l150.36,133.29c6.45,5.71,16.62,1.14,16.62-7.48V9.49C500,4.25,495.75,0,490.51,0H250Z"></path></svg> Algolia</a></div></div></form>
      
    </div>

    <div class="flex items-center h-100 ml-auto">
        <div class="flex" id="authentication-top-nav-actions">
          <span class="hidden m:block">
            <a href="https://dev.to/enter" class="c-link c-link--block mr-2 whitespace-nowrap ml-auto" data-no-instant="">
              Log in
            </a>
          </span>

          <a href="https://dev.to/enter?state=new-user" data-tracking-id="ca_top_nav" data-tracking-source="top_navbar" class="c-cta c-cta--branded whitespace-nowrap mr-2" data-no-instant="">
            Create account
          </a>
        </div>
    </div>
  </div>
</header>

<div class="hamburger">
  <div class="hamburger__content">
    <header class="hamburger__content__header">
      <h2 class="fs-l fw-bold flex-1 break-word lh-tight">DEV Community</h2>

      <button class="c-btn c-btn--icon-alone js-hamburger-trigger shrink-0" aria-label="Close">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="amu1rs437ek6y9ukezm03e10680xpcao" aria-hidden="true" class="crayons-icon c-btn__icon"><title id="amu1rs437ek6y9ukezm03e10680xpcao">Close</title><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636l4.95 4.95z"></path></svg>

      </button>
    </header>

    <div class="p-2 js-navigation-links-container" id="authentication-hamburger-actions">
    </div>
  </div>
  <div class="hamburger__overlay js-hamburger-trigger"></div>
</div>


        <div id="active-broadcast" class="broadcast-wrapper"></div>
<div id="page-content" class="wrapper stories stories-show articletag-go articletag-webdev articleuser-720068" data-current-page="stories-show">
  <div id="page-content-inner" data-internal-nav="false" data-follow-clicks-initialized="true">
    <div id="page-route-change" class="screen-reader-only" aria-live="polite" aria-atomic="true"></div>

    
<link rel="prefetch" href="https://dev.to/reactions?article_id=952534">

<style>
  .html-variant-wrapper { display: none}
</style>



<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/webcomponents-loader.js.download" integrity="sha384-3HK5hxQbkFqOIxMbpROlRmRtYl2LBZ52t+tqcjzsmr9NJuOWQxl8RgQSyFvq2lhy" crossorigin="anonymous" defer=""></script>

  <script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/webShare-0686f0b9ac40589694ef6ae6a6202c44119bc781c254f6cf6d52d8a008461156.js.download" defer="defer"></script>
<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/articlePage-e91bed0487621b06608474cfabffa186165e1f43f05b24581203ccc21e7aa45d.js.download" defer="defer"></script>
<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/commentDropdowns-7a28d130e5b78d38b30a9495a964003a66bd64fa455fc70b766d69cf06b9ba24.js.download" defer="defer"></script>

    <script type="application/ld+json">
      {"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd"},"url":"https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd","image":["https://media2.dev.to/dynamic/image/width=1080,height=1080,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fhshqf8r6jmx4t5stefx4.png","https://media2.dev.to/dynamic/image/width=1280,height=720,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fhshqf8r6jmx4t5stefx4.png","https://media2.dev.to/dynamic/image/width=1600,height=900,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fhshqf8r6jmx4t5stefx4.png"],"publisher":{"@context":"http://schema.org","@type":"Organization","name":"DEV Community","logo":{"@context":"http://schema.org","@type":"ImageObject","url":"https://media2.dev.to/dynamic/image/width=192,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png","width":"192","height":"192"}},"headline":"Go: Deep dive into net package learning from TCP server","author":{"@context":"http://schema.org","@type":"Person","url":"https://dev.to/hgsgtk","name":"Kazuki Higashiguchi"},"datePublished":"2022-01-13T01:12:48Z","dateModified":"2022-01-14T05:14:13Z"}
    </script>

  
<div class="crayons-layout crayons-layout--3-cols crayons-layout--article">
  <aside class="crayons-layout__sidebar-left" aria-label="Article actions">
    <div class="crayons-article-actions print-hidden">
  <div class="crayons-article-actions__inner">

    
<div class="reaction-drawer__outer hoverdown" style="">
  <button id="reaction-drawer-trigger" aria-label="reaction-drawer-trigger" aria-pressed="false" class="hoverdown-trigger crayons-reaction pseudo-reaction crayons-tooltip__activator relative">
      <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction--like crayons-reaction__icon--inactive" style="width: 40px; height: 40px">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" role="img" aria-hidden="true" class="crayons-icon">
    <g clip-path="url(#clip0_988_3276)">
        <path d="M19 14V17H22V19H18.999L19 22H17L16.999 19H14V17H17V14H19ZM20.243 4.75698C22.505 7.02498 22.583 10.637 20.479 12.992L19.059 11.574C20.39 10.05 20.32 7.65998 18.827 6.16998C17.324 4.67098 14.907 4.60698 13.337 6.01698L12.002 7.21498L10.666 6.01798C9.09103 4.60598 6.67503 4.66798 5.17203 6.17198C3.68203 7.66198 3.60703 10.047 4.98003 11.623L13.412 20.069L12 21.485L3.52003 12.993C1.41603 10.637 1.49503 7.01898 3.75603 4.75698C6.02103 2.49298 9.64403 2.41698 12 4.52898C14.349 2.41998 17.979 2.48998 20.242 4.75698H20.243Z" fill="#525252"></path>
    </g>
    <defs>
        <clippath id="clip0_988_3276">
        <rect width="24" height="24" fill="white"></rect>
        </clippath>
    </defs>
</svg>

      </span>
      <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction__icon--active" style="width: 40px; height: 40px">
        <img aria_hidden="true" height="24" width="24" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/heart-plus-active-9ea3b22f2bc311281db911d416166c5f430636e76b15cd5df6b3b841d830eefa.svg">
      </span>
      <span class="crayons-reaction__count" id="reaction_total_count">48</span>
      <span class="crayons-tooltip__content">
        Add reaction
      </span>
  </button>

  <div class="reaction-drawer" aria-expanded="false">
    <div class="reaction-drawer__container">
        <button id="reaction-butt-like" name="Like" aria-label="Like" aria-pressed="false" class="crayons-reaction crayons-tooltip__activator relative pt-2 pr-2 pb-1 pl-2 activated" data-category="like">
    <span class="crayons-reaction__icon crayons-reaction__icon--inactive p-0">
      <img aria_hidden="true" height="32" width="32" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/sparkle-heart-5f9bee3767e18deb1bb725290cb151c25234768a0e9a2bd39370c382d02920cf.svg">
    </span>
    <span class="crayons-reaction__count" id="reaction-number-like">37</span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
</button>

        <button id="reaction-butt-unicorn" name="Unicorn" aria-label="Unicorn" aria-pressed="false" class="crayons-reaction crayons-tooltip__activator relative pt-2 pr-2 pb-1 pl-2 activated" data-category="unicorn">
    <span class="crayons-reaction__icon crayons-reaction__icon--inactive p-0">
      <img aria_hidden="true" height="32" width="32" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/multi-unicorn-b44d6f8c23cdd00964192bedc38af3e82463978aa611b4365bd33a0f1f4f3e97.svg">
    </span>
    <span class="crayons-reaction__count" id="reaction-number-unicorn">5</span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Unicorn
    </span>
</button>

        <button id="reaction-butt-exploding_head" name="Exploding Head" aria-label="Exploding Head" aria-pressed="false" class="crayons-reaction crayons-tooltip__activator relative pt-2 pr-2 pb-1 pl-2 activated" data-category="exploding_head">
    <span class="crayons-reaction__icon crayons-reaction__icon--inactive p-0">
      <img aria_hidden="true" height="32" width="32" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/exploding-head-daceb38d627e6ae9b730f36a1e390fca556a4289d5a41abb2c35068ad3e2c4b5.svg">
    </span>
    <span class="crayons-reaction__count" id="reaction-number-exploding_head">2</span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Exploding Head
    </span>
</button>

        <button id="reaction-butt-raised_hands" name="Raised Hands" aria-label="Raised Hands" aria-pressed="false" class="crayons-reaction crayons-tooltip__activator relative pt-2 pr-2 pb-1 pl-2 activated" data-category="raised_hands">
    <span class="crayons-reaction__icon crayons-reaction__icon--inactive p-0">
      <img aria_hidden="true" height="32" width="32" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/raised-hands-74b2099fd66a39f2d7eed9305ee0f4553df0eb7b4f11b01b6b1b499973048fe5.svg">
    </span>
    <span class="crayons-reaction__count" id="reaction-number-raised_hands">2</span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Raised Hands
    </span>
</button>

        <button id="reaction-butt-fire" name="Fire" aria-label="Fire" aria-pressed="false" class="crayons-reaction crayons-tooltip__activator relative pt-2 pr-2 pb-1 pl-2 activated" data-category="fire">
    <span class="crayons-reaction__icon crayons-reaction__icon--inactive p-0">
      <img aria_hidden="true" height="32" width="32" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/fire-f60e7a582391810302117f987b22a8ef04a2fe0df7e3258a5f49332df1cec71e.svg">
    </span>
    <span class="crayons-reaction__count" id="reaction-number-fire">2</span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Fire
    </span>
</button>

    </div>
  </div>
</div>

<button id="reaction-butt-comment" aria-label="Jump to Comments" aria-pressed="false" class="crayons-reaction crayons-reaction--comment crayons-tooltip__activator relative" data-category="comment">
    <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction__icon--inactive">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-hidden="true" class="crayons-icon">
    <path d="M10 3h4a8 8 0 010 16v3.5c-5-2-12-5-12-11.5a8 8 0 018-8zm2 14h2a6 6 0 000-12h-4a6 6 0 00-6 6c0 3.61 2.462 5.966 8 8.48V17z"></path>
</svg>

    </span>
    <span class="crayons-reaction__count" id="reaction-number-comment" data-count="2">2</span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Jump to Comments
    </span>
</button>

<button id="reaction-butt-readinglist" aria-label="Add to reading list" aria-pressed="false" class="crayons-reaction crayons-reaction--readinglist crayons-tooltip__activator relative activated" data-category="readinglist">
    <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction__icon--inactive">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-hidden="true" class="crayons-icon">
    <path d="M5 2h14a1 1 0 011 1v19.143a.5.5 0 01-.766.424L12 18.03l-7.234 4.536A.5.5 0 014 22.143V3a1 1 0 011-1zm13 2H6v15.432l6-3.761 6 3.761V4z"></path>
</svg>

    </span>
    <span class="crayons-reaction__count" id="reaction-number-readinglist">27</span>

    <span data-testid="tooltip" class="crayons-tooltip__content">
      Save
    </span>
</button>


<button id="reaction-butt-boost" aria-label="Boost" aria-pressed="false" class="crayons-reaction crayons-reaction--boost crayons-tooltip__activator relative">
    <span class="crayons-reaction__icon crayons-reaction__icon--borderless crayons-reaction__icon--inactive">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" role="img" aria-hidden="true" class="crayons-icon" width="24" height="24">
  <path transform="translate(24,0) scale(-1,1)" d="M6 4H21C21.5523 4 22 4.44772 22 5V12H20V6H6V9L1 5L6 1V4ZM18 20H3C2.44772 20 2 19.5523 2 19V12H4V18H18V15L23 19L18 23V20Z"></path>
</svg>

    </span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Boost
    </span>
</button>


    <div class="only-sidebar-menu-item">
      <div id="mod-actions-menu-btn-area" class="print-hidden trusted-visible-block align-center">
      </div>
    </div>
    <div class="align-center m:relative">
      <button id="article-show-more-button" aria-controls="article-show-more-dropdown" aria-expanded="false" aria-haspopup="true" class="dropbtn crayons-btn crayons-btn--ghost-dimmed crayons-btn--icon-rounded" aria-label="Share post options" data-dropdown-initialized="true" data-initialized="true">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="asqyttwmea4i1lmdlmcwm3hhu5r7ak1o" aria-hidden="true" class="crayons-icon dropdown-icon"><title id="asqyttwmea4i1lmdlmcwm3hhu5r7ak1o">More...</title><path fill-rule="evenodd" clip-rule="evenodd" d="M7 12a2 2 0 11-4 0 2 2 0 014 0zm7 0a2 2 0 11-4 0 2 2 0 014 0zm5 2a2 2 0 100-4 2 2 0 000 4z"></path></svg>

      </button>

      <div id="article-show-more-dropdown" class="crayons-dropdown side-bar left-2 right-2 m:right-auto m:left-100 s:left-auto mb-1 m:mb-0 top-unset bottom-100 m:top-0 m:bottom-unset" style="">
        <div class="only-mobile-menu-item">
          <button class="mod-actions-menu-btn crayons-link crayons-link--block w-100 bg-transparent border-0 fw-bold">
            Moderate
          </button>
        </div>
        <div>
          <button id="copy-post-url-button" class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0" data-posturl="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd">
            <span class="fw-bold">Copy link</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" id="article-copy-icon" role="img" aria-labelledby="a5klew2fsfsmgwiznvpb99s5nl5z3yth" aria-hidden="true" class="crayons-icon mx-2 shrink-0"><title id="a5klew2fsfsmgwiznvpb99s5nl5z3yth">Copy link</title>
    <path d="M7 6V3a1 1 0 011-1h12a1 1 0 011 1v14a1 1 0 01-1 1h-3v3c0 .552-.45 1-1.007 1H4.007A1 1 0 013 21l.003-14c0-.552.45-1 1.007-1H7zm2 0h8v10h2V4H9v2zm-2 5v2h6v-2H7zm0 4v2h6v-2H7z"></path>
</svg>

          </button>
          <div id="article-copy-link-announcer" aria-live="polite" class="crayons-notice crayons-notice--success my-2 p-1" hidden="">Copied to Clipboard</div>
        </div>

        <div class="Desktop-only">
          <a target="_blank" class="crayons-link crayons-link--block" rel="noopener" href="https://twitter.com/intent/tweet?text=%22Go%3A%20Deep%20dive%20into%20net%20package%20learning%20from%20TCP%20server%22%20by%20%40hgsgtk%20%23DEVCommunity%20https%3A%2F%2Fdev.to%2Fhgsgtk%2Fhow-go-handles-network-and-system-calls-when-tcp-server-1nbd">
            Share to X
          </a>
          <a target="_blank" class="crayons-link crayons-link--block" rel="noopener" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fdev.to%2Fhgsgtk%2Fhow-go-handles-network-and-system-calls-when-tcp-server-1nbd&amp;title=Go%3A%20Deep%20dive%20into%20net%20package%20learning%20from%20TCP%20server&amp;summary=FYI%3A%20A%20previous%20title%20was%20%E2%80%9CHow%20Go%20handles%20network%20and%20system%20calls%20when%20TCP%20server%E2%80%9D.%20%20%20%20%20%20%20%20%20%20%20Key...&amp;source=DEV%20Community">
            Share to LinkedIn
          </a>
          <a target="_blank" class="crayons-link crayons-link--block" rel="noopener" href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fdev.to%2Fhgsgtk%2Fhow-go-handles-network-and-system-calls-when-tcp-server-1nbd">
            Share to Facebook
          </a>
          <a target="_blank" class="crayons-link crayons-link--block" rel="noopener" href="https://toot.kytta.dev/?text=https%3A%2F%2Fdev.to%2Fhgsgtk%2Fhow-go-handles-network-and-system-calls-when-tcp-server-1nbd">
            Share to Mastodon
          </a>
        </div>

        <web-share-wrapper shareurl="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd" sharetitle="Go: Deep dive into net package learning from TCP server" sharetext="FYI: A previous title was “How Go handles network and system calls when TCP server”.           Key..." template="web-share-button">
          <a href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#" class="dropdown-link-row crayons-link crayons-link--block">Share Post via...</a>
        </web-share-wrapper>
        <template id="web-share-button"></template>

        <a href="https://dev.to/report-abuse" class="crayons-link crayons-link--block">Report Abuse</a>
      </div>
    </div>
  </div>
</div>

  </aside>

  <main id="main-content" class="crayons-layout__content grid gap-4">
    <div class="article-wrapper">


      <article class="crayons-card crayons-article mb-4" id="article-show-container" data-article-id="952534" data-article-slug="how-go-handles-network-and-system-calls-when-tcp-server-1nbd" data-author-id="720068" data-author-name="Kazuki Higashiguchi" data-author-username="hgsgtk" data-co-author-ids="" data-path="/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd" data-pin-path="/stories/feed/pinned_article" data-pinned-article-id="" data-published="true" data-scheduled="false">
        <header class="crayons-article__header" id="main-title">
            <a class="crayons-article__cover" href="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_articles_hshqf8r6jmx4t5stefx4.png">
              <img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_articles_hshqf8r6jmx4t5stefx4.png" style="aspect-ratio: auto 1000 / 420;" width="1000" height="420" class="crayons-article__cover__image" alt="Cover image for Go: Deep dive into net package learning from TCP server">
            </a>

          <div class="crayons-article__header__meta">
            <div class="flex s:items-start flex-col s:flex-row">
              <div id="action-space" class="crayons-article__actions mb-4 s:mb-0 s:order-last"></div>
              <div class="flex flex-1 mb-5 items-start">
                <div class="relative">
                    <a href="https://dev.to/hgsgtk"><img class="radius-full align-middle" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_user_profile_image_720068_5c781aa5-1963-47e4-9958-4d875c5d9aaa.jpeg" width="40" height="40" alt="Kazuki Higashiguchi"></a>
                </div>
                <div class="pl-3 flex-1">
                  <a href="https://dev.to/hgsgtk" class="crayons-link fw-bold">Kazuki Higashiguchi</a>
                  
                  <p class="fs-xs color-base-60">
                      Posted on <time datetime="2022-01-13T01:12:48Z" class="date" title="Thursday, January 13, 2022 at 6:42:48 AM">Jan 13, 2022</time>

                      • Edited on <time datetime="2022-01-14T05:14:13Z" class="date" title="Friday, January 14, 2022 at 10:44:13 AM">Jan 14, 2022</time>

                  </p>
                </div>
              </div>
            </div>

            <div class="multiple_reactions_engagement">
    <span class="reaction_engagement_like">
      <img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/sparkle-heart-5f9bee3767e18deb1bb725290cb151c25234768a0e9a2bd39370c382d02920cf.svg" width="24" height="24">
      <span id="reaction_engagement_like_count">37</span>
    </span>
    <span class="reaction_engagement_unicorn">
      <img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/multi-unicorn-b44d6f8c23cdd00964192bedc38af3e82463978aa611b4365bd33a0f1f4f3e97.svg" width="24" height="24">
      <span id="reaction_engagement_unicorn_count">5</span>
    </span>
    <span class="reaction_engagement_exploding_head">
      <img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/exploding-head-daceb38d627e6ae9b730f36a1e390fca556a4289d5a41abb2c35068ad3e2c4b5.svg" width="24" height="24">
      <span id="reaction_engagement_exploding_head_count">2</span>
    </span>
    <span class="reaction_engagement_raised_hands">
      <img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/raised-hands-74b2099fd66a39f2d7eed9305ee0f4553df0eb7b4f11b01b6b1b499973048fe5.svg" width="24" height="24">
      <span id="reaction_engagement_raised_hands_count">2</span>
    </span>
    <span class="reaction_engagement_fire">
      <img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/fire-f60e7a582391810302117f987b22a8ef04a2fe0df7e3258a5f49332df1cec71e.svg" width="24" height="24">
      <span id="reaction_engagement_fire_count">2</span>
    </span>
</div>


            <h1 class=" fs-3xl m:fs-4xl l:fs-5xl fw-bold s:fw-heavy lh-tight mb-2 medium">
              Go: Deep dive into net package learning from TCP server
            </h1>
            
                <div class="spec__tags flex flex-wrap">
                    <a class="crayons-tag   " style="
        --tag-bg: rgba(41, 190, 176, 0.10);
        --tag-prefix: #29BEB0;
        --tag-bg-hover: rgba(41, 190, 176, 0.10);
        --tag-prefix-hover: #29BEB0;
      " href="https://dev.to/t/go"><span class="crayons-tag__prefix">#</span>go</a>
                    <a class="crayons-tag   " style="
        --tag-bg: rgba(86, 39, 101, 0.10);
        --tag-prefix: #562765;
        --tag-bg-hover: rgba(86, 39, 101, 0.10);
        --tag-prefix-hover: #562765;
      " href="https://dev.to/t/webdev"><span class="crayons-tag__prefix">#</span>webdev</a>
                </div>
          </div>
        </header>

        <div class="crayons-article__main ">

          <div class="crayons-article__body text-styles spec__body" data-article-id="952534" id="article-body">
              <p><em>FYI: A previous title was “How Go handles network and system calls when TCP server”.</em></p>

<h2>
  <a name="key-takeaways" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#key-takeaways">
  </a>
  Key takeaways
</h2>

<ul>
<li>With the net package, you can create a TCP server with such simple and little code (<a href="https://go.dev/play/p/Zm3rzBWh8Yl" target="_blank" rel="noopener noreferrer">The Go playground</a>).</li>
<li>If the host in the address parameter is empty or a literal unspecified IP address, listen on all available unicast and anycast IP addresses of the local system.</li>
<li>There are two kinds of DNS resolver: Go's built-in DNS resolver and uses Cgo DNS resolver. By default, Go's built-in DNS resolver is used.</li>
<li>If the port in the address parameter is empty or "0", a port number is automatically chosen by the system call <a href="https://man7.org/linux/man-pages/man2/bind.2.html" target="_blank" rel="noopener noreferrer">bind</a>.</li>
<li>Go accepts an incoming connection by using the system call <a href="https://man7.org/linux/man-pages/man2/accept.2.html" target="_blank" rel="noopener noreferrer">accept</a>.</li>
</ul>

<h2>
  <a name="tcp-server-in-go" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#tcp-server-in-go">
  </a>
  TCP server in Go
</h2>

<p>By using packages in <a href="https://pkg.go.dev/std" target="_blank" rel="noopener noreferrer">standard libraries</a>, you make it easier to write and manage your code and ensure that it's reliable. They are well designed and provide more functionality than is normally found in traditional standard libraries. In particular, <a href="https://pkg.go.dev/net" target="_blank" rel="noopener noreferrer">net package</a> is often used by web application engineers, which provides a portable interface for network I/O, including TCP/IO, UDP, domain name resolution, and Unix domain sockets.</p>

<p>With the net package, you can create a TCP server with such simple and little code (<a href="https://go.dev/play/p/ZtRvvkVrmRN" target="_blank" rel="noopener noreferrer">The Go playground</a>).</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"net"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// Listen for incoming connections.</span>
    <span class="n">addr</span> <span class="o">:=</span> <span class="s">"localhost:8888"</span>
    <span class="n">l</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">net</span><span class="o">.</span><span class="n">Listen</span><span class="p">(</span><span class="s">"tcp"</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">l</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
    <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">net</span><span class="o">.</span><span class="n">SplitHostPort</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">Addr</span><span class="p">()</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Listening on host: %s, port: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>

    <span class="k">for</span> <span class="p">{</span>
        <span class="c">// Listen for an incoming connection</span>
        <span class="n">conn</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">l</span><span class="o">.</span><span class="n">Accept</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
            <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="c">// Handle connections in a new goroutine</span>
        <span class="k">go</span> <span class="k">func</span><span class="p">(</span><span class="n">conn</span> <span class="n">net</span><span class="o">.</span><span class="n">Conn</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">buf</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="m">1024</span><span class="p">)</span>
            <span class="nb">len</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">conn</span><span class="o">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
                <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Error reading: %#v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Message received: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">buf</span><span class="p">[</span><span class="o">:</span><span class="nb">len</span><span class="p">]))</span>

            <span class="n">conn</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="s">"Message received.</span><span class="se">\n</span><span class="s">"</span><span class="p">))</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
        <span class="p">}(</span><span class="n">conn</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>When you run this Go script, it will start a TCP server that listens for incoming connections on port 8888.</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>

<span class="nv">$ </span>go run main.go

Listening on host: 127.0.0.1, port: 8888


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>If you make a TCP connection to this server with <a href="https://linux.die.net/man/1/nc#:~:text=The%20nc%20(or%20netcat)%20utility,with%20both%20IPv4%20and%20IPv6." target="_blank" rel="noopener noreferrer">nc</a> command, you will see that the server has successfully received the message.</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>

$ echo -n "How's it going?" | nc localhost 8888
Message received.


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>The implementation looks very simple and easy but knowing what is doing in the net package makes it easier to deal with advanced issues. This article tries to deep dive into the design and implementation of the net package.</p>

<p>Note that the version of Go presented in this article is 1.17.5.</p>

<h2>
  <a name="listen-for-incoming-connections" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#listen-for-incoming-connections">
  </a>
  Listen for incoming connections
</h2>

<p>At the begging of the main function, use <a href="https://pkg.go.dev/net#Listen" target="_blank" rel="noopener noreferrer">net.Listen</a> to listen for incoming connections.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// Listen for incoming connections.</span>
    <span class="n">addr</span> <span class="o">:=</span> <span class="s">"localhost:8888"</span>
    <span class="n">l</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">net</span><span class="o">.</span><span class="n">Listen</span><span class="p">(</span><span class="s">"tcp"</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">l</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
    <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">net</span><span class="o">.</span><span class="n">SplitHostPort</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">Addr</span><span class="p">()</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Listening on host: %s, port: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>The signature of <a href="https://pkg.go.dev/net#Listen" target="_blank" rel="noopener noreferrer">net.Listen</a> is as follow.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="n">Listen</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">address</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="n">Listener</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<h2>
  <a name="network-types-tcp-tcp4-tcp6" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#network-types-tcp-tcp4-tcp6">
  </a>
  Network types: "tcp", "tcp4", "tcp6"
</h2>

<p>The first argument "network" must be "tcp", "tcp4", "tcp6", "unix" or "unixpacket". </p>

<p>"tcp4" means IPv4 only, and "tcp6" means IPv6 only. "tcp" means IPv4 or IPv6 as the comment on <a href="https://pkg.go.dev/net#ListenConfig" target="_blank" rel="noopener noreferrer">net.ListenConfig</a> mentions.</p>

<blockquote>
<p>Network and address parameters passed to Control method are not necessarily the ones passed to Listen. For example, passing "tcp” to Listen will cause the Control function to be called with "tcp4" or "tcp6".</p>
</blockquote>
<h2>
  <a name="go-and-cgo-resolver" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#go-and-cgo-resolver">
  </a>
  Go and Cgo resolver
</h2>

<p>The second argument "address" means the local network address and there are several patterns for TCP networks.</p>

<p>If the host in the address parameter is empty or a literal unspecified IP address, listen on all available unicast and anycast IP addresses of the local system.</p>

<p>In the above example, I pass the literal unspecified IP address "localhost", and <a href="https://pkg.go.dev/net#Listen" target="_blank" rel="noopener noreferrer">net.Listen</a> casts as the IP "127.0.0.1". </p>

<p>For another example, if you pass an empty address as the following code:</p>
<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="c">// empty host</span>
<span class="n">addr</span> <span class="o">:=</span> <span class="s">":8888"</span>
<span class="n">l</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">net</span><span class="o">.</span><span class="n">Listen</span><span class="p">(</span><span class="s">"tcp"</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">defer</span> <span class="n">l</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
<span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">net</span><span class="o">.</span><span class="n">SplitHostPort</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">Addr</span><span class="p">()</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Listening on host: %s, port: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>The host and port where the server listens will be "::" and "8888".</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>

<span class="nv">$ </span>go run main.go
Listening on host: ::, port: 8888


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>As described in the comment on <a href="https://pkg.go.dev/net#Dial" target="_blank" rel="noopener noreferrer">net.Dial</a>, if the host is empty or a literal unspecified IP address, for TCP and UDP ":80", "0.0.0.0:80" or "[::]:80.</p>

<blockquote>
<p>For TCP, UDP and IP networks, if the host is empty or a literal unspecified IP address, as in ":80", "0.0.0.0:80" or "[::]:80" for TCP and UDP, "", "0.0.0.0" or "::" for IP, the local system is assumed.</p>
</blockquote>

<p>Let's take a look at the inner implementation of this behavior. In the net package, several functions are invoked in the order shown in the following figure.</p>

<p><a href="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_articles_mulkk8vrj9j8v1zv6my6.png" class="article-body-image-wrapper"><img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_articles_mulkk8vrj9j8v1zv6my6.png" alt="A diagram describing the structure inside of the net package" loading="lazy"></a></p>

<p><a href="https://pkg.go.dev/net#Listen" target="_blank" rel="noopener noreferrer">net.Listen</a> invokes <a href="https://pkg.go.dev/net#ListenConfig.Listen" target="_blank" rel="noopener noreferrer">ListenConfig.Listen</a> that announces on the local network address. </p>

<p>Then it creates <a href="https://pkg.go.dev/net#pkg-variables" target="_blank" rel="noopener noreferrer">DefaultResolver</a> which type is <a href="https://pkg.go.dev/net#Resolver" target="_blank" rel="noopener noreferrer">net.Resolver</a> who actually resolves the network IP address, and then invokes <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/dial.go;l=202" target="_blank" rel="noopener noreferrer">Resolver.resolveAddrList</a>.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">type</span> <span class="n">Resolver</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">PreferGo</span> <span class="kt">bool</span>
    <span class="n">StrictErrors</span> <span class="kt">bool</span>
    <span class="n">Dial</span> <span class="k">func</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="n">address</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="n">Conn</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
    <span class="c">// contains filtered or unexported fields</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>From there various functions are invoked, most notably <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/lookup_unix.go;l=107" target="_blank" rel="noopener noreferrer">Resolver.lookupPort</a> decides whether it uses Go's built-in DNS resolver or uses Cgo DNS resolver.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="p">(</span><span class="n">r</span> <span class="o">*</span><span class="n">Resolver</span><span class="p">)</span> <span class="n">lookupPort</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="n">service</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">r</span><span class="o">.</span><span class="n">preferGo</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">systemConf</span><span class="p">()</span><span class="o">.</span><span class="n">canUseCgo</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">port</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">ok</span> <span class="o">:=</span> <span class="n">cgoLookupPort</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="n">service</span><span class="p">);</span> <span class="n">ok</span> <span class="p">{</span>
            <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
                <span class="c">// Issue 18213: if cgo fails, first check to see whether we</span>
                <span class="c">// have the answer baked-in to the net package.</span>
                <span class="k">if</span> <span class="n">port</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">goLookupPort</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">service</span><span class="p">);</span> <span class="n">err</span> <span class="o">==</span> <span class="no">nil</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="n">port</span><span class="p">,</span> <span class="no">nil</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">port</span><span class="p">,</span> <span class="n">err</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">goLookupPort</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">service</span><span class="p">)</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>Go's built-in DNS resolver sends DNS requests directly to the server listed in <code>/etc/resolv.conf</code>, and Cgo-based resolver calls C library routines such as <a href="https://man7.org/linux/man-pages/man3/getaddrinfo.3.html" target="_blank" rel="noopener noreferrer">getaddrinfo</a> and <a href="https://man7.org/linux/man-pages/man3/getnameinfo.3.html" target="_blank" rel="noopener noreferrer">getnameinfo</a>.</p>

<p>By default, Go's built-in DNS resolver is used because a blocked DNS request consumes only a goroutine, while a blocked C call consumes an operating system thread. See <a href="https://pkg.go.dev/net#hdr-Name_Resolution" target="_blank" rel="noopener noreferrer">Name Resolution in the GoDoc of the net package</a> for more detail.</p>

<p>Also, You can see a use case of the Cgo DNS resolver from <a href="https://engineering.grab.com/dns-resolution-in-go-and-cgo" target="_blank" rel="noopener noreferrer">DNS Resolution in Go and Cgo</a>.</p>

<h2>
  <a name="a-way-to-dynamically-choose-a-port" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#a-way-to-dynamically-choose-a-port">
  </a>
  A way to dynamically choose a port
</h2>

<p>In addition, if the port in the address parameter is empty or "0", a port number is automatically chosen.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="c">// a port number will be automatically chosen</span>
<span class="n">addr</span> <span class="o">:=</span> <span class="s">"127.0.0.1:"</span> 
<span class="n">l</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">net</span><span class="o">.</span><span class="n">Listen</span><span class="p">(</span><span class="s">"tcp"</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">defer</span> <span class="n">l</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
<span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">net</span><span class="o">.</span><span class="n">SplitHostPort</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">Addr</span><span class="p">()</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Listening on host: %s, port: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>For example, if you pass "127.0.0.1:" to the address parameter, a port number will be automatically chosen every time you run it.</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>

<span class="nv">$ </span>go run main.go
Listening on host: 127.0.0.1, port: 51962

<span class="nv">$ </span>go run main.go
Listening on host: 127.0.0.1, port: 51978

<span class="nv">$ </span>go run main.go
Listening on host: 127.0.0.1, port: 51979


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>It's an interesting behavior, how is the port automatically selected? Let's take a look at the inner implementation of this behavior. Here is the overview of the net package's implementation.</p>

<p><a href="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_articles_5tid0ud2obcjgv57rchi.png" class="article-body-image-wrapper"><img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_articles_5tid0ud2obcjgv57rchi.png" alt="A diagram describing the structure inside of the net package" loading="lazy"></a></p>

<p>As you can see, <a href="https://pkg.go.dev/net#Listen" target="_blank" rel="noopener noreferrer">net.Listen</a> invokes <a href="https://pkg.go.dev/net#ListenConfig.Listen" target="_blank" rel="noopener noreferrer">net.ListenConfig.Listen</a>. </p>

<p>Then, <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/dial.go;l=202" target="_blank" rel="noopener noreferrer">net.Resolver.resolveAddrList</a> resolves the address as "0" if the port in the address parameter is empty or "0". It is tested at <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/lookup_test.go;l=758" target="_blank" rel="noopener noreferrer">TestLookupPort</a> in the net package.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="n">TestLookupPort</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span><span class="n">testing</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="c">// (omit)</span>
    <span class="k">type</span> <span class="n">test</span> <span class="k">struct</span> <span class="p">{</span>
        <span class="n">network</span> <span class="kt">string</span>
        <span class="n">name</span>    <span class="kt">string</span>
        <span class="n">port</span>    <span class="kt">int</span>
        <span class="n">ok</span>      <span class="kt">bool</span>
    <span class="p">}</span>
    <span class="k">var</span> <span class="n">tests</span> <span class="o">=</span> <span class="p">[]</span><span class="n">test</span><span class="p">{</span>
        <span class="p">{</span><span class="s">"tcp"</span><span class="p">,</span> <span class="s">"0"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">true</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"udp"</span><span class="p">,</span> <span class="s">"0"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">true</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"udp"</span><span class="p">,</span> <span class="s">"domain"</span><span class="p">,</span> <span class="m">53</span><span class="p">,</span> <span class="no">true</span><span class="p">},</span>

        <span class="p">{</span><span class="s">"--badnet--"</span><span class="p">,</span> <span class="s">"zzz"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">false</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"tcp"</span><span class="p">,</span> <span class="s">"--badport--"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">false</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"tcp"</span><span class="p">,</span> <span class="s">"-1"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">false</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"tcp"</span><span class="p">,</span> <span class="s">"65536"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">false</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"udp"</span><span class="p">,</span> <span class="s">"-1"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">false</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"udp"</span><span class="p">,</span> <span class="s">"65536"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">false</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"tcp"</span><span class="p">,</span> <span class="s">"123456789"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">false</span><span class="p">},</span>

        <span class="c">// Issue 13610: LookupPort("tcp", "")</span>
        <span class="p">{</span><span class="s">"tcp"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">true</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"tcp4"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">true</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"tcp6"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">true</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"udp"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">true</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"udp4"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">true</span><span class="p">},</span>
        <span class="p">{</span><span class="s">"udp6"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="no">true</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="c">// (omit)</span>

    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">tt</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">tests</span> <span class="p">{</span>
        <span class="n">port</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">LookupPort</span><span class="p">(</span><span class="n">tt</span><span class="o">.</span><span class="n">network</span><span class="p">,</span> <span class="n">tt</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">port</span> <span class="o">!=</span> <span class="n">tt</span><span class="o">.</span><span class="n">port</span> <span class="o">||</span> <span class="p">(</span><span class="n">err</span> <span class="o">==</span> <span class="no">nil</span><span class="p">)</span> <span class="o">!=</span> <span class="n">tt</span><span class="o">.</span><span class="n">ok</span> <span class="p">{</span>
            <span class="n">t</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"LookupPort(%q, %q) = %d, %v; want %d, error=%t"</span><span class="p">,</span> <span class="n">tt</span><span class="o">.</span><span class="n">network</span><span class="p">,</span> <span class="n">tt</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">tt</span><span class="o">.</span><span class="n">port</span><span class="p">,</span> <span class="o">!</span><span class="n">tt</span><span class="o">.</span><span class="n">ok</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
            <span class="k">if</span> <span class="n">perr</span> <span class="o">:=</span> <span class="n">parseLookupPortError</span><span class="p">(</span><span class="n">err</span><span class="p">);</span> <span class="n">perr</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
                <span class="n">t</span><span class="o">.</span><span class="n">Error</span><span class="p">(</span><span class="n">perr</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>Next, <a href="https://pkg.go.dev/net#ListenConfig.Listen" target="_blank" rel="noopener noreferrer">net.ListenConfig.Listen</a> creates a <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/dial.go;l=684" target="_blank" rel="noopener noreferrer">net.sysListener</a> that contains a Listen's parameters and configuration. When the network protocol is "tcp", <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/dial.go;l=625;bpv=1;bpt=1" target="_blank" rel="noopener noreferrer">net.ListenConfig.Listen</a> invokes <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/tcpsock_posix.go;l=168;bpv=1;bpt=1" target="_blank" rel="noopener noreferrer">net.sysListener.listenTCP</a>.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="p">(</span><span class="n">lc</span> <span class="o">*</span><span class="n">ListenConfig</span><span class="p">)</span> <span class="n">Listen</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="n">address</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="n">Listener</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">addrs</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">DefaultResolver</span><span class="o">.</span><span class="n">resolveAddrList</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"listen"</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">OpError</span><span class="p">{</span><span class="n">Op</span><span class="o">:</span> <span class="s">"listen"</span><span class="p">,</span> <span class="n">Net</span><span class="o">:</span> <span class="n">network</span><span class="p">,</span> <span class="n">Source</span><span class="o">:</span> <span class="no">nil</span><span class="p">,</span> <span class="n">Addr</span><span class="o">:</span> <span class="no">nil</span><span class="p">,</span> <span class="n">Err</span><span class="o">:</span> <span class="n">err</span><span class="p">}</span>
    <span class="p">}</span>
    <span class="n">sl</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">sysListener</span><span class="p">{</span>
        <span class="n">ListenConfig</span><span class="o">:</span> <span class="o">*</span><span class="n">lc</span><span class="p">,</span>
        <span class="n">network</span><span class="o">:</span>      <span class="n">network</span><span class="p">,</span>
        <span class="n">address</span><span class="o">:</span>      <span class="n">address</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">var</span> <span class="n">l</span> <span class="n">Listener</span>
    <span class="n">la</span> <span class="o">:=</span> <span class="n">addrs</span><span class="o">.</span><span class="n">first</span><span class="p">(</span><span class="n">isIPv4</span><span class="p">)</span>
    <span class="k">switch</span> <span class="n">la</span> <span class="o">:=</span> <span class="n">la</span><span class="o">.</span><span class="p">(</span><span class="k">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">*</span><span class="n">TCPAddr</span><span class="o">:</span>
        <span class="n">l</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">sl</span><span class="o">.</span><span class="n">listenTCP</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">la</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">*</span><span class="n">UnixAddr</span><span class="o">:</span>
        <span class="n">l</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">sl</span><span class="o">.</span><span class="n">listenUnix</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">la</span><span class="p">)</span>

    <span class="c">// (omit)</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p><a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/tcpsock_posix.go;l=168;bpv=1;bpt=1" target="_blank" rel="noopener noreferrer">net.sysListener.listenTCP</a> invokes <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/ipsock_posix.go;drc=refs%2Ftags%2Fgo1.17.5;bpv=1;bpt=1;l=137" target="_blank" rel="noopener noreferrer">net.internetSocket</a>.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="p">(</span><span class="n">sl</span> <span class="o">*</span><span class="n">sysListener</span><span class="p">)</span> <span class="n">listenTCP</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">laddr</span> <span class="o">*</span><span class="n">TCPAddr</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="n">TCPListener</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fd</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">internetSocket</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">sl</span><span class="o">.</span><span class="n">network</span><span class="p">,</span> <span class="n">laddr</span><span class="p">,</span> <span class="no">nil</span><span class="p">,</span> <span class="n">syscall</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="s">"listen"</span><span class="p">,</span> <span class="n">sl</span><span class="o">.</span><span class="n">ListenConfig</span><span class="o">.</span><span class="n">Control</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="n">err</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="o">&amp;</span><span class="n">TCPListener</span><span class="p">{</span><span class="n">fd</span><span class="o">:</span> <span class="n">fd</span><span class="p">,</span> <span class="n">lc</span><span class="o">:</span> <span class="n">sl</span><span class="o">.</span><span class="n">ListenConfig</span><span class="p">},</span> <span class="no">nil</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>Then it invokes <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/sock_posix.go;l=19;drc=refs%2Ftags%2Fgo1.17.5;bpv=1;bpt=1" target="_blank" rel="noopener noreferrer">net.socket</a>.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="n">socket</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">net</span> <span class="kt">string</span><span class="p">,</span> <span class="n">family</span><span class="p">,</span> <span class="n">sotype</span><span class="p">,</span> <span class="n">proto</span> <span class="kt">int</span><span class="p">,</span> <span class="n">ipv6only</span> <span class="kt">bool</span><span class="p">,</span> <span class="n">laddr</span><span class="p">,</span> <span class="n">raddr</span> <span class="n">sockaddr</span><span class="p">,</span> <span class="n">ctrlFn</span> <span class="k">func</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="n">syscall</span><span class="o">.</span><span class="n">RawConn</span><span class="p">)</span> <span class="kt">error</span><span class="p">)</span> <span class="p">(</span><span class="n">fd</span> <span class="o">*</span><span class="n">netFD</span><span class="p">,</span> <span class="n">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c">// (omit)</span>

    <span class="k">if</span> <span class="n">fd</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">newFD</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">family</span><span class="p">,</span> <span class="n">sotype</span><span class="p">,</span> <span class="n">net</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">poll</span><span class="o">.</span><span class="n">CloseFunc</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="n">err</span>
    <span class="p">}</span>

    <span class="c">// (omit)</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>It returns a network file descriptor that is ready for asynchronous I/O using the network poller. The type representing a network file descriptor is <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/fd_posix.go;drc=refs%2Ftags%2Fgo1.17.5;bpv=1;bpt=1;l=17" target="_blank" rel="noopener noreferrer">net.netFD</a>.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">type</span> <span class="n">netFD</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">pfd</span> <span class="n">poll</span><span class="o">.</span><span class="n">FD</span>

    <span class="n">family</span>      <span class="kt">int</span>
    <span class="n">sotype</span>      <span class="kt">int</span>
    <span class="n">isConnected</span> <span class="kt">bool</span> 
    <span class="n">net</span>         <span class="kt">string</span>
    <span class="n">laddr</span>       <span class="n">Addr</span>
    <span class="n">raddr</span>       <span class="n">Addr</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p><a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/internal/poll/fd_unix.go;drc=refs%2Ftags%2Fgo1.17.5;bpv=1;bpt=1;l=18" target="_blank" rel="noopener noreferrer">pool.FD</a> is the exported type representing a file descriptor which is used by the net and os packages. It is an internal package, so you can't use it directly.</p>

<p>Let's go back to the rest of <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/sock_posix.go;l=19;drc=refs%2Ftags%2Fgo1.17.5;bpv=1;bpt=1" target="_blank" rel="noopener noreferrer">net.socket</a>.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="n">socket</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">net</span> <span class="kt">string</span><span class="p">,</span> <span class="n">family</span><span class="p">,</span> <span class="n">sotype</span><span class="p">,</span> <span class="n">proto</span> <span class="kt">int</span><span class="p">,</span> <span class="n">ipv6only</span> <span class="kt">bool</span><span class="p">,</span> <span class="n">laddr</span><span class="p">,</span> <span class="n">raddr</span> <span class="n">sockaddr</span><span class="p">,</span> <span class="n">ctrlFn</span> <span class="k">func</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="n">syscall</span><span class="o">.</span><span class="n">RawConn</span><span class="p">)</span> <span class="kt">error</span><span class="p">)</span> <span class="p">(</span><span class="n">fd</span> <span class="o">*</span><span class="n">netFD</span><span class="p">,</span> <span class="n">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>

    <span class="c">// (omit)</span>

    <span class="k">if</span> <span class="n">laddr</span> <span class="o">!=</span> <span class="no">nil</span> <span class="o">&amp;&amp;</span> <span class="n">raddr</span> <span class="o">==</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">sotype</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">syscall</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="n">syscall</span><span class="o">.</span><span class="n">SOCK_SEQPACKET</span><span class="o">:</span>
            <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fd</span><span class="o">.</span><span class="n">listenStream</span><span class="p">(</span><span class="n">laddr</span><span class="p">,</span> <span class="n">listenerBacklog</span><span class="p">(),</span> <span class="n">ctrlFn</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
                <span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="n">err</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">fd</span><span class="p">,</span> <span class="no">nil</span>
        <span class="k">case</span> <span class="n">syscall</span><span class="o">.</span><span class="n">SOCK_DGRAM</span><span class="o">:</span>
            <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fd</span><span class="o">.</span><span class="n">listenDatagram</span><span class="p">(</span><span class="n">laddr</span><span class="p">,</span> <span class="n">ctrlFn</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
                <span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="n">err</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">fd</span><span class="p">,</span> <span class="no">nil</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fd</span><span class="o">.</span><span class="n">dial</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">laddr</span><span class="p">,</span> <span class="n">raddr</span><span class="p">,</span> <span class="n">ctrlFn</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fd</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
        <span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="n">err</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">fd</span><span class="p">,</span> <span class="no">nil</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>As a prerequisite, <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol" target="_blank" rel="noopener noreferrer">TCP (Transmission Control Protocol)</a> is a stream oriented protocol which guarantees that all bytes received will be identical and in the same order as those sent.  In contract, <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol" target="_blank" rel="noopener noreferrer">UDP (User Datagram Protocol)</a> provides a connectionless datagram service that prioritizes time over reliability.</p>

<p>That's why <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/ipsock_posix.go;drc=refs%2Ftags%2Fgo1.17.5;bpv=1;bpt=1;l=137" target="_blank" rel="noopener noreferrer">net.internetSocket</a> chooses the socket type <a href="https://pkg.go.dev/syscall#pkg-constants" target="_blank" rel="noopener noreferrer">syscall.SOCK_STREAM</a> that provides sequenced, reliable, two-way, connection-byte streams as <a href="https://man7.org/linux/man-pages/man2/socket.2.html" target="_blank" rel="noopener noreferrer">Linux programmer's manual</a> describes.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="p">(</span><span class="n">sl</span> <span class="o">*</span><span class="n">sysListener</span><span class="p">)</span> <span class="n">listenTCP</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">laddr</span> <span class="o">*</span><span class="n">TCPAddr</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="n">TCPListener</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fd</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">internetSocket</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">sl</span><span class="o">.</span><span class="n">network</span><span class="p">,</span> <span class="n">laddr</span><span class="p">,</span> <span class="no">nil</span><span class="p">,</span> <span class="n">syscall</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="s">"listen"</span><span class="p">,</span> <span class="n">sl</span><span class="o">.</span><span class="n">ListenConfig</span><span class="o">.</span><span class="n">Control</span><span class="p">)</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p><a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/sock_posix.go;l=19;drc=refs%2Ftags%2Fgo1.17.5;bpv=1;bpt=1" target="_blank" rel="noopener noreferrer">net.socket</a> invokes <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/sock_posix.go;l=176;drc=refs%2Ftags%2Fgo1.17.5;bpv=1;bpt=1" target="_blank" rel="noopener noreferrer">net.netFD.listenStream</a> when syscall.SOCK_STREAM is passed.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">switch</span> <span class="n">sotype</span> <span class="p">{</span>
<span class="k">case</span> <span class="n">syscall</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="n">syscall</span><span class="o">.</span><span class="n">SOCK_SEQPACKET</span><span class="o">:</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fd</span><span class="o">.</span><span class="n">listenStream</span><span class="p">(</span><span class="n">laddr</span><span class="p">,</span> <span class="n">listenerBacklog</span><span class="p">(),</span> <span class="n">ctrlFn</span><span class="p">);</span> 


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>Finally, we reached the last place.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="p">(</span><span class="n">fd</span> <span class="o">*</span><span class="n">netFD</span><span class="p">)</span> <span class="n">listenStream</span><span class="p">(</span><span class="n">laddr</span> <span class="n">sockaddr</span><span class="p">,</span> <span class="n">backlog</span> <span class="kt">int</span><span class="p">,</span> <span class="n">ctrlFn</span> <span class="k">func</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="n">syscall</span><span class="o">.</span><span class="n">RawConn</span><span class="p">)</span> <span class="kt">error</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>

    <span class="c">// (omit)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">=</span> <span class="n">syscall</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">pfd</span><span class="o">.</span><span class="n">Sysfd</span><span class="p">,</span> <span class="n">lsa</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">NewSyscallError</span><span class="p">(</span><span class="s">"bind"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">=</span> <span class="n">listenFunc</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">pfd</span><span class="o">.</span><span class="n">Sysfd</span><span class="p">,</span> <span class="n">backlog</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">NewSyscallError</span><span class="p">(</span><span class="s">"listen"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">=</span> <span class="n">fd</span><span class="o">.</span><span class="n">init</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">err</span>
    <span class="p">}</span>
    <span class="n">lsa</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">syscall</span><span class="o">.</span><span class="n">Getsockname</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">pfd</span><span class="o">.</span><span class="n">Sysfd</span><span class="p">)</span>
    <span class="n">fd</span><span class="o">.</span><span class="n">setAddr</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">addrFunc</span><span class="p">()(</span><span class="n">lsa</span><span class="p">),</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">return</span> <span class="no">nil</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p><a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.5:src/net/sock_posix.go;l=176;drc=refs%2Ftags%2Fgo1.17.5;bpv=1;bpt=1" target="_blank" rel="noopener noreferrer">net.netFD.listenStream</a> executes three system calls: bind, listen, and getsockname.</p>

<p><a href="https://man7.org/linux/man-pages/man2/bind.2.html" target="_blank" rel="noopener noreferrer">bind</a> assigns the socket address specified by given address to the socket referred to by the file descriptor.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">if</span> <span class="n">err</span> <span class="o">=</span> <span class="n">syscall</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">pfd</span><span class="o">.</span><span class="n">Sysfd</span><span class="p">,</span> <span class="n">lsa</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p><a href="https://man7.org/linux/man-pages/man2/listen.2.html" target="_blank" rel="noopener noreferrer">listen</a> marks the socket referred to by the file descriptor as a passive socket, that is, as a socket that will be used to accept incoming requests using <a href="https://man7.org/linux/man-pages/man2/accept.2.html" target="_blank" rel="noopener noreferrer">accept</a></p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">if</span> <span class="n">err</span> <span class="o">=</span> <span class="n">listenFunc</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">pfd</span><span class="o">.</span><span class="n">Sysfd</span><span class="p">,</span> <span class="n">backlog</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p><a href="https://man7.org/linux/man-pages/man2/getsockname.2.html" target="_blank" rel="noopener noreferrer">getsockname</a> returns the current address to which the socket is bound. You can know the current address even when the port is randomly chosen. </p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="n">lsa</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">syscall</span><span class="o">.</span><span class="n">Getsockname</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">pfd</span><span class="o">.</span><span class="n">Sysfd</span><span class="p">)</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>Let's go back to the first question: How is the port automatically selected? The answer is the specification of <a href="https://man7.org/linux/man-pages/man2/bind.2.html" target="_blank" rel="noopener noreferrer">bind</a>.</p>

<p>Ports that can be used by the TCP protocol are 16 bits in the protocol header so they can hold values between 0 - 65535. </p>

<p>The <a href="https://man7.org/linux/man-pages/man2/bind.2.html" target="_blank" rel="noopener noreferrer">bind</a> uses a zero in the port number to mean "pick random one" and bind its address.</p>

<p>For example, the specification of the bind function in Linux is described in <a href="https://man7.org/linux/man-pages/man7/ip.7.html" target="_blank" rel="noopener noreferrer">ip(7) — Linux manual page</a>.</p>

<blockquote>
<p>An ephemeral port is allocated to a socket in the following circumstances:</p>

<ul>
<li> the port number in a socket address is specified as 0 when calling bind(2);</li>
</ul>
</blockquote>

<p><a href="https://en.wikipedia.org/wiki/Ephemeral_port" target="_blank" rel="noopener noreferrer">Ephemeral port</a> is a port of a transport layer protocol that is used for only a short period of time for the duration of a communication session. It is also called dynamic ports, because it is used on a per request basis. The IANA assigns the the range 49152-65535 for the selection of ephemeral ports as <a href="https://datatracker.ietf.org/doc/html/rfc6056#section-2" target="_blank" rel="noopener noreferrer">RFC 6056</a> describes.</p>

<p>The port range varies depending on the server system, but the same is true not only for Linux, but also other systems. For example, in Windows, <a href="https://docs.microsoft.com/en-us/windows/win32/api/winsock/nf-winsock-bind" target="_blank" rel="noopener noreferrer">bind function (winsock.h)</a> assigns a unique port to the application from the dynamic client port range 49152 and 65535 (when on Windows Vista later).</p>

<h2>
  <a name="accept-a-connection" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#accept-a-connection">
  </a>
  Accept a connection
</h2>

<p>So far, you have understood the back side of starting to listen for TCP connections. Now, let's go back to the first sample code again.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">addr</span> <span class="o">:=</span> <span class="s">"localhost:8888"</span>
    <span class="n">l</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">net</span><span class="o">.</span><span class="n">Listen</span><span class="p">(</span><span class="s">"tcp"</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>

    <span class="c">// (omit)</span>

    <span class="k">for</span> <span class="p">{</span>
        <span class="c">// Listen for an incoming connection</span>
        <span class="n">conn</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">l</span><span class="o">.</span><span class="n">Accept</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
            <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="c">// Handle connections in a new goroutine</span>
        <span class="c">// (omit)</span>
    <span class="p">}</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>The next part is the mechanism to accept a connection, <a href="https://pkg.go.dev/net#TCPListener.Accept" target="_blank" rel="noopener noreferrer">net.TCPListener.Accept</a>. </p>

<p><a href="https://pkg.go.dev/net#TCPListener.Accept" target="_blank" rel="noopener noreferrer">net.TCPListener.Accept</a> waits for the next call and returns a generic <a href="https://pkg.go.dev/net#Conn" target="_blank" rel="noopener noreferrer">net.Conn</a>. It implements the Accept method in the <a href="https://pkg.go.dev/net#Listener" target="_blank" rel="noopener noreferrer">net.Listener</a> interface that represents a generic network listener for stream-oriented protocols. </p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">type</span> <span class="n">Listener</span> <span class="k">interface</span> <span class="p">{</span>
    <span class="n">Accept</span><span class="p">()</span> <span class="p">(</span><span class="n">Conn</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
    <span class="n">Close</span><span class="p">()</span> <span class="kt">error</span>
    <span class="n">Addr</span><span class="p">()</span> <span class="n">Addr</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>It is implemented by various types: FileListener, UnixListener and TCPListener.</p>

<p>In understanding this implementation, I have again prepared a map.</p>

<p><a href="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_articles_gjt8ly04e2bghr5ngfgh.png" class="article-body-image-wrapper"><img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_articles_gjt8ly04e2bghr5ngfgh.png" alt="A diagram describing the structure inside of the net package" loading="lazy"></a></p>

<p><a href="https://pkg.go.dev/net#TCPListener.Accept" target="_blank" rel="noopener noreferrer">net.TCPListener.Accept</a> invokes <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.6:src/net/tcpsock_posix.go;drc=refs%2Ftags%2Fgo1.17.6;l=138" target="_blank" rel="noopener noreferrer">net.TCPListener.accept</a> and then it invokes <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.17.6:src/net/fd_unix.go;drc=refs%2Ftags%2Fgo1.17.6;l=171" target="_blank" rel="noopener noreferrer">net.netFD.accept</a>.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">func</span> <span class="p">(</span><span class="n">fd</span> <span class="o">*</span><span class="n">netFD</span><span class="p">)</span> <span class="n">accept</span><span class="p">()</span> <span class="p">(</span><span class="n">netfd</span> <span class="o">*</span><span class="n">netFD</span><span class="p">,</span> <span class="n">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">d</span><span class="p">,</span> <span class="n">rsa</span><span class="p">,</span> <span class="n">errcall</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fd</span><span class="o">.</span><span class="n">pfd</span><span class="o">.</span><span class="n">Accept</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">errcall</span> <span class="o">!=</span> <span class="s">""</span> <span class="p">{</span>
            <span class="n">err</span> <span class="o">=</span> <span class="n">wrapSyscallError</span><span class="p">(</span><span class="n">errcall</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="n">err</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">netfd</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">newFD</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">fd</span><span class="o">.</span><span class="n">family</span><span class="p">,</span> <span class="n">fd</span><span class="o">.</span><span class="n">sotype</span><span class="p">,</span> <span class="n">fd</span><span class="o">.</span><span class="n">net</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">poll</span><span class="o">.</span><span class="n">CloseFunc</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="n">err</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">=</span> <span class="n">netfd</span><span class="o">.</span><span class="n">init</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">netfd</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
        <span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="n">err</span>
    <span class="p">}</span>
    <span class="n">lsa</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">syscall</span><span class="o">.</span><span class="n">Getsockname</span><span class="p">(</span><span class="n">netfd</span><span class="o">.</span><span class="n">pfd</span><span class="o">.</span><span class="n">Sysfd</span><span class="p">)</span>
    <span class="n">netfd</span><span class="o">.</span><span class="n">setAddr</span><span class="p">(</span><span class="n">netfd</span><span class="o">.</span><span class="n">addrFunc</span><span class="p">()(</span><span class="n">lsa</span><span class="p">),</span> <span class="n">netfd</span><span class="o">.</span><span class="n">addrFunc</span><span class="p">()(</span><span class="n">rsa</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">netfd</span><span class="p">,</span> <span class="no">nil</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>Here, it executes two system calls: accept and getsockname.</p>

<p>The <a href="https://man7.org/linux/man-pages/man2/accept.2.html" target="_blank" rel="noopener noreferrer">accept</a> system call is used with connection-based socket types (SOCK_STREAM, SOCK_SEQPACKET). As you see, SOCK_STREAM is chosen when it's a TCP listener. It extracts the first connection request on the queue of pending connections for listening socket, creates a new connected socket, and returns a new file descriptor referring to that socket.</p>

<p>The getsockname is called to know a new connected socket and file descriptor.</p>

<h2>
  <a name="read-and-write-a-connection" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#read-and-write-a-connection">
  </a>
  Read and write a connection
</h2>

<p><a href="https://pkg.go.dev/net#TCPListener.Accept" target="_blank" rel="noopener noreferrer">net.TCPListener.Accept</a> returns <a href="https://pkg.go.dev/net#Conn" target="_blank" rel="noopener noreferrer">net.Conn</a> that is a generic stream-oriented network connection.</p>

<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<span class="k">type</span> <span class="n">Conn</span> <span class="k">interface</span> <span class="p">{</span>
    <span class="n">Read</span><span class="p">(</span><span class="n">b</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="n">n</span> <span class="kt">int</span><span class="p">,</span> <span class="n">err</span> <span class="kt">error</span><span class="p">)</span>
    <span class="n">Write</span><span class="p">(</span><span class="n">b</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="n">n</span> <span class="kt">int</span><span class="p">,</span> <span class="n">err</span> <span class="kt">error</span><span class="p">)</span>
    <span class="n">Close</span><span class="p">()</span> <span class="kt">error</span>
    <span class="n">LocalAddr</span><span class="p">()</span> <span class="n">Addr</span>
    <span class="n">RemoteAddr</span><span class="p">()</span> <span class="n">Addr</span>
    <span class="n">SetDeadline</span><span class="p">(</span><span class="n">t</span> <span class="n">time</span><span class="o">.</span><span class="n">Time</span><span class="p">)</span> <span class="kt">error</span>
    <span class="n">SetReadDeadline</span><span class="p">(</span><span class="n">t</span> <span class="n">time</span><span class="o">.</span><span class="n">Time</span><span class="p">)</span> <span class="kt">error</span>
    <span class="n">SetWriteDeadline</span><span class="p">(</span><span class="n">t</span> <span class="n">time</span><span class="o">.</span><span class="n">Time</span><span class="p">)</span> <span class="kt">error</span>
<span class="p">}</span>


</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>

<p>By using the <a href="https://pkg.go.dev/net#Conn" target="_blank" rel="noopener noreferrer">net.Conn</a>, you can read and write a connection like this:</p>


<div class="highlight js-code-highlight">
<pre class="highlight go"><code>

<p><span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span><br>
    <span class="n">addr</span> <span class="o">:=</span> <span class="s">"localhost:8888"</span><br>
    <span class="n">l</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">net</span><span class="o">.</span><span class="n">Listen</span><span class="p">(</span><span class="s">"tcp"</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span></p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&lt;span class="c"&gt;// (omit)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c"&gt;// Listen for an incoming connection&lt;/span&gt;
    &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Accept&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="no"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nb"&gt;panic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="c"&gt;// Handle connections in a new goroutine&lt;/span&gt;
    &lt;span class="k"&gt;go&lt;/span&gt; &lt;span class="k"&gt;func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Conn&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;buf&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="nb"&gt;make&lt;/span&gt;&lt;span class="p"&gt;([]&lt;/span&gt;&lt;span class="kt"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="m"&gt;1024&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="no"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;fmt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"Error reading: %#v&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;fmt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"Message received: %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;

        &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Write&lt;/span&gt;&lt;span class="p"&gt;([]&lt;/span&gt;&lt;span class="kt"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"Message received.&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="p"&gt;}(&lt;/span&gt;&lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<p><span class="p">}</span></p>

</code></pre>
<div class="highlight__panel js-actions-panel">
<div class="highlight__panel-action js-fullscreen-code-action">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
    <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
</svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
    <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
</svg>

</div>
</div>
</div>
<h2>
<br>
  <a name="conclusion" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#conclusion"><br>
  </a><br>
  Conclusion<br>
</h2>

<p>List the key takeaways again.</p>

<ul>
<li>With the net package, you can create a TCP server with such simple and little code (<a href="https://go.dev/play/p/Zm3rzBWh8Yl" target="_blank" rel="noopener noreferrer">The Go playground</a>).</li>
<li>If the host in the address parameter is empty or a literal unspecified IP address, listen on all available unicast and anycast IP addresses of the local system.</li>
<li>There are two kinds of DNS resolver: Go's built-in DNS resolver and uses Cgo DNS resolver. By default, Go's built-in DNS resolver is used.</li>
<li>If the port in the address parameter is empty or "0", a port number is automatically chosen by the system call <a href="https://man7.org/linux/man-pages/man2/bind.2.html" target="_blank" rel="noopener noreferrer">bind</a>.</li>
<li>Go accepts an incoming connection by using the system call <a href="https://man7.org/linux/man-pages/man2/accept.2.html" target="_blank" rel="noopener noreferrer">accept</a>.</li>
</ul>

<p>You should now have a more in-depth understanding of the fundamentals of implementing a TCP server.</p>


          </div>

            <div class="js-billboard-container body-billboard-container" data-async-url="/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd/bmar11/post_body_bottom"><div>  <style>
  .long-bb-body {
    max-height: calc(100vh - 200px);
    overflow: hidden;
  }
  .long-bb-bottom {
    height: 180px;
    background: linear-gradient(to top, var(--card-bg), transparent);
    margin-top: -180px;
    position:relative;
    z-index: 5;
  }
</style>

  <div class="crayons-card crayons-card--secondary crayons-bb js-billboard body-billboard mb-2 mt-6" style="" data-display-unit="" data-id="215971" data-category-click="click" data-category-impression="impression" data-context-type="article" data-dismissal-sku="" data-special="nothing" data-article-id="952534" data-type-of="partner" data-impression-recorded="true">
    <div class="crayons-story__top flex">
      <div class="crayons-bb__header relative">
    <div class="flex">
        <a href="https://dev.to/qodo" target="_blank" rel="noopener" class="flex">
          <img width="24" height="24" class="radius-default crayons-bb__image" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_organization_profile_image_10470_b549837f-79f9-45a2-9b4a-963a469d9430.jpeg" alt="profile" loading="lazy">
          <div class="crayons-bb__title ml-2 fs-s fw-medium">Qodo</div>
        </a>
        <span class="crayons-bb__indicator c-indicator c-indicator--subtle c-indicator--round fs-2xs fw-medium ml-2 py-1 px-2">Promoted</span>
    </div>

  <button id="sponsorship-dropdown-trigger-215971" aria-controls="sponsorship-dropdown-215971" aria-expanded="false" aria-haspopup="true" class="dropBtn crayons-bb__dropdown crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon" aria-label="Toggle dropdown menu" data-dropdown-initialized="true" data-initialized="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="an6znx0tynuaylkvetu1itsbaciv9bs2" class="crayons-icon pointer-events-none"><title id="an6znx0tynuaylkvetu1itsbaciv9bs2">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

  </button>

  <div id="sponsorship-dropdown-215971" class="crayons-dropdown bb-dropdown right-0">
    <ul class="list-none m-0">
        <li>
          <a class="crayons-link crayons-link--block" href="https://dev.to/billboards">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 100-16 8 8 0 000 16zM11 7h2v2h-2V7zm0 4h2v6h-2v-6z"></path>
</svg>

            What's a billboard?
          </a>
        </li>
      <li>
        <a class="crayons-link crayons-link--block" href="https://dev.to/settings/customization#sponsors">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M3.34 16.9999C2.91727 16.2689 2.58866 15.4874 2.362 14.6739C2.85531 14.423 3.26959 14.0406 3.55903 13.5688C3.84846 13.0971 4.00176 12.5545 4.00197 12.0011C4.00218 11.4476 3.84928 10.9049 3.5602 10.4329C3.27112 9.961 2.85712 9.57821 2.364 9.32694C2.81604 7.69243 3.67673 6.1999 4.865 4.98994C5.32909 5.29167 5.86762 5.45911 6.42098 5.47373C6.97434 5.48834 7.52095 5.34958 8.00033 5.07278C8.47971 4.79598 8.87315 4.39194 9.13713 3.90539C9.4011 3.41883 9.52531 2.86872 9.496 2.31594C11.1381 1.89157 12.8612 1.89226 14.503 2.31795C14.474 2.87071 14.5984 3.42073 14.8626 3.90715C15.1268 4.39357 15.5204 4.79742 15.9998 5.07401C16.4793 5.35059 17.0259 5.48913 17.5793 5.4743C18.1326 5.45946 18.671 5.29183 19.135 4.98994C19.714 5.57994 20.228 6.25095 20.66 6.99995C21.093 7.74895 21.417 8.52995 21.638 9.32595C21.1447 9.57685 20.7304 9.95932 20.441 10.4311C20.1515 10.9028 19.9982 11.4454 19.998 11.9988C19.9978 12.5523 20.1507 13.095 20.4398 13.5669C20.7289 14.0389 21.1429 14.4217 21.636 14.6729C21.184 16.3075 20.3233 17.8 19.135 19.0099C18.6709 18.7082 18.1324 18.5408 17.579 18.5262C17.0257 18.5115 16.479 18.6503 15.9997 18.9271C15.5203 19.2039 15.1268 19.6079 14.8629 20.0945C14.5989 20.5811 14.4747 21.1312 14.504 21.6839C12.8619 22.1083 11.1388 22.1076 9.497 21.6819C9.52605 21.1292 9.4016 20.5792 9.13742 20.0927C8.87324 19.6063 8.47964 19.2025 8.00017 18.9259C7.5207 18.6493 6.97405 18.5108 6.42073 18.5256C5.8674 18.5404 5.32896 18.7081 4.865 19.0099C4.27399 18.4069 3.76159 17.7315 3.34 16.9999ZM9 17.1959C10.0656 17.8106 10.8668 18.797 11.25 19.9659C11.749 20.0129 12.25 20.0139 12.749 19.9669C13.1324 18.7978 13.934 17.8114 15 17.1969C16.0652 16.5806 17.3205 16.3794 18.525 16.6319C18.815 16.2239 19.065 15.7889 19.273 15.3339C18.4524 14.4174 17.9991 13.2302 18 11.9999C18 10.7399 18.47 9.56295 19.273 8.66595C19.0635 8.21109 18.8125 7.77658 18.523 7.36795C17.3193 7.62025 16.0648 7.41942 15 6.80395C13.9344 6.18932 13.1332 5.20293 12.75 4.03394C12.251 3.98694 11.75 3.98594 11.251 4.03294C10.8676 5.20209 10.066 6.1885 9 6.80295C7.93478 7.41926 6.67948 7.62046 5.475 7.36795C5.18556 7.77623 4.93513 8.21081 4.727 8.66595C5.54757 9.5825 6.00088 10.7697 6 11.9999C6 13.2599 5.53 14.4369 4.727 15.3339C4.93647 15.7888 5.18754 16.2233 5.477 16.6319C6.68072 16.3796 7.93521 16.5805 9 17.1959ZM12 14.9999C11.2044 14.9999 10.4413 14.6839 9.87868 14.1213C9.31607 13.5587 9 12.7956 9 11.9999C9 11.2043 9.31607 10.4412 9.87868 9.87862C10.4413 9.31602 11.2044 8.99995 12 8.99995C12.7956 8.99995 13.5587 9.31602 14.1213 9.87862C14.6839 10.4412 15 11.2043 15 11.9999C15 12.7956 14.6839 13.5587 14.1213 14.1213C13.5587 14.6839 12.7956 14.9999 12 14.9999ZM12 12.9999C12.2652 12.9999 12.5196 12.8946 12.7071 12.7071C12.8946 12.5195 13 12.2652 13 11.9999C13 11.7347 12.8946 11.4804 12.7071 11.2928C12.5196 11.1053 12.2652 10.9999 12 10.9999C11.7348 10.9999 11.4804 11.1053 11.2929 11.2928C11.1054 11.4804 11 11.7347 11 11.9999C11 12.2652 11.1054 12.5195 11.2929 12.7071C11.4804 12.8946 11.7348 12.9999 12 12.9999Z" fill="black"></path>
</svg>

          Manage preferences
        </a>
      </li>
      <hr>
      <li>
        <a class="crayons-link crayons-link--block" href="https://dev.to/report-abuse?billboard=215971">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M12.382 3a1 1 0 0 1 .894.553L14 5h6a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1h-6.382a1 1 0 0 1-.894-.553L12 16H5v6H3V3h9.382Zm-.618 2H5v9h8.236l1 2H19V7h-6.236l-1-2Z"></path>
</svg>

          Report billboard
        </a>
      </li>
    </ul>
  </div>
</div>

    </div>
    <div class="p-1 pt-3 text-styles text-styles--billboard long-bb-body">
      <p><a href="https://dev.to/qodo/introducing-qodo-gen-10-transform-your-workflow-with-agentic-ai-5a96?bb=215971"><img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___i.imgur.com_OIquUjW.png" alt="Qodo Takeover" width="4096" height="1720" loading="lazy"></a></p>
<h2>  <a name="introducing-qodo-gen-10-transform-your-workflow-with-agentic-ai" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#introducing-qodo-gen-10-transform-your-workflow-with-agentic-ai">  </a>  <a href="https://dev.to/qodo/introducing-qodo-gen-10-transform-your-workflow-with-agentic-ai-5a96?bb=215971">Introducing Qodo Gen 1.0: Transform Your Workflow with Agentic AI</a>
</h2>
<p>Rather than just generating snippets, our agents understand your entire project context, can make decisions, use tools, and carry out tasks autonomously.</p>
<p><a href="https://dev.to/qodo/introducing-qodo-gen-10-transform-your-workflow-with-agentic-ai-5a96?bb=215971" class="ltag_cta ltag_cta--branded" role="button">Read full post</a></p>
    </div>
      <div class="long-bb-bottom"></div>
      <div class="crayons-card__footer">
        <button class="c-cta c-cta--branded billboard-readmore-button">
          Read More
        </button>
      </div>
  </div>

</div></div>
        </div>
          <section id="comments" data-follow-button-container="true" data-updated-at="2025-03-14 22:21:46 UTC" class="text-padding mb-4 border-t-1 border-0 border-solid border-base-10">
      <header class="relative flex justify-between items-center mb-6">
        <div class="flex items-center">
          <h2 class="crayons-subtitle-1">
            Top comments <span class="js-comments-count" data-comments-count="2">(2)</span>
          </h2>
        </div>


        <div id="comment-subscription" class="print-hidden">
          <div class="crayons-btn-group">
            <span class="crayons-btn crayons-btn--outlined">Subscribe</span>
          </div>
        </div>
      </header>
      <div id="billboard_delay_trigger"></div>
      <div id="comments-container" data-testid="comments-container" data-commentable-id="952534" data-commentable-type="Article" data-has-recent-comment-activity="false">

          <div id="response-templates-data" class="hidden"></div>


<form class="comment-form print-hidden" id="new_comment" action="https://dev.to/comments" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓" autocomplete="off">

  <input type="hidden" name="authenticity_token" value="NOTHING" id="new_comment_authenticity_token">

    <input value="952534" autocomplete="off" type="hidden" name="comment[commentable_id]" id="comment_commentable_id">
    <input value="Article" autocomplete="off" type="hidden" name="comment[commentable_type]" id="comment_commentable_type">
    

  <span class="crayons-avatar m:crayons-avatar--l mr-2 shrink-0">
    <img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_articles_8j7kvp660rqzt99zui8e.png" width="32" height="32" alt="pic" class="crayons-avatar__image overflow-hidden" id="comment-primary-user-profile--avatar" loading="lazy">
  </span>
  <div class="comment-form__inner">
    <div class="comment-form__field" data-tracking-name="comment_form_textfield">
      <textarea placeholder="Add to the discussion" onfocus="handleFocus(event)" onkeyup="handleKeyUp(event)" onkeydown="handleKeyDown(event)" oninput="handleChange(event)" id="text-area" required="required" class="crayons-textfield comment-textarea crayons-textfield--ghost" aria-label="Add a comment to the discussion" name="comment[body_markdown]"></textarea>

    </div>

    <div class="response-templates-container crayons-card crayons-card--secondary p-4 mb-4 comment-form__templates fs-base hidden">
      <header class="mb-3">
        <button type="button" class="crayons-btn personal-template-button active" data-target-type="personal" data-form-id="new_comment">Personal</button>
        <button type="button" class="crayons-btn moderator-template-button hidden" data-target-type="moderator" data-form-id="new_comment">Trusted User</button>
      </header>

      <div class="personal-responses-container">
      </div>
      <div class="moderator-responses-container hidden">
      </div>

      <a target="_blank" rel="noopener nofollow" href="https://dev.to/settings/response-templates">
        Create template
      </a>
      <p>Templates let you quickly answer FAQs or store snippets for re-use.</p>
    </div>

    <div class="comment-form__preview text-styles text-styles--secondary" id="preview-div"></div>

    <div class="comment-form__buttons mb-4">
      <button type="submit" class="crayons-btn mr-2 js-btn-enable" onclick="validateField(event)" data-tracking-name="comment_submit_button" disabled="">Submit</button>
      <button type="button" class="preview-toggle crayons-btn crayons-btn--secondary comment-action-preview js-btn-enable mr-2" data-tracking-name="comment_preview_button" disabled="">Preview</button>
      <a href="https://dev.to/404.html" class="dismiss-edit-comment crayons-btn crayons-btn--ghost js-btn-dismiss hidden">Dismiss</a>
    </div>
  </div>

  <div class="code-of-conduct" id="toggle-code-of-conduct-checkbox"></div>
</form>


        <div class="comments" id="comment-trees-container">
                <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open="">
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ahjfna9no0e8c2vkvmo17vokwsaw7qjf" class="crayons-icon expanded"><title id="ahjfna9no0e8c2vkvmo17vokwsaw7qjf">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="abvg1d7cu290jz5tdaknctteg3o8xk0z" class="crayons-icon collapsed"><title id="abvg1d7cu290jz5tdaknctteg3o8xk0z">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div id="comment-node-956636" class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    " data-comment-id="956636" data-path="/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd/comments/22b3i" data-comment-author-id="332852" data-content-user-id="332852">
    <a name="comment-22b3i" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/srimaln91" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_user_profile_image_332852_5863880a-5042-464d-9d59-bff32cce1b4b.jpeg" alt="srimaln91 profile image" loading="lazy">
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/srimaln91" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">H.M.S.Nishantha</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-956636" aria-controls="comment-profile-preview-content-956636" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="H.M.S.Nishantha profile details" aria-expanded="false" aria-haspopup="true" data-dropdown-initialized="true" data-initialized="true">
      H.M.S.Nishantha
      
    </button>
    <div id="comment-profile-preview-content-956636" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown reverse" style="--card-color: #010b1b; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="https://dev.to/srimaln91" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws(1).com_uploads_user_profile_image_332852_5863880a-5042-464d-9d59-bff32cce1b4b.jpeg" class="crayons-avatar__image" alt="" loading="lazy">
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      H.M.S.Nishantha
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:332852,&quot;name&quot;:&quot;H.M.S.Nishantha&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: H.M.S.Nishantha" aria-pressed="false" data-fetched="fetched">Follow</button>
</div>
  <div class="color-base-70">
    Hi. I'm a software developer from Sri Lanka who is interested in microservices, stream processing and GIS.
  </div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
        <li>
          <div class="key">
            Location
          </div>
          <div class="value">
            Sri Lanka
          </div>
        </li>
          <li>
            <div class="key">
              Work
            </div>
            <div class="value">
              Software Engineer at PickMe
            </div>
          </li>
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2020-02-09T18:02:37Z" class="date" title="Sunday, February 9, 2020 at 11:32:37 PM">Feb 9, 2020</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">•</span>

<a href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#comment-22b3i" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2022-10-17T09:41:57Z" class="date-short-year" title="Monday, October 17, 2022 at 3:11:57 PM">Oct 17 '22</time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-956636" aria-controls="comment-dropdown-956636" aria-expanded="false" class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon " aria-label="Toggle dropdown menu" aria-haspopup="true" data-dropdown-initialized="true" data-initialized="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ahzz8ji3vp3exyosdere5y79y39zjcb0" class="crayons-icon pointer-events-none"><title id="ahzz8ji3vp3exyosdere5y79y39zjcb0">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-956636" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#comment-22b3i" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to H.M.S.Nishantha&#39;s comment" data-no-instant="">Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="332852" data-action="settings-button" data-path="https://dev.to/srimaln91/comment/22b3i/settings" aria-label="Go to H.M.S.Nishantha&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="720068" data-user-id="332852">
              <button class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment" data-hide-type="hide" data-comment-id="956636" data-comment-url="https://dev.to/srimaln91/comment/22b3i" aria-label="Hide H.M.S.Nishantha&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/srimaln91/comment/22b3i/mod" aria-label="Moderate H.M.S.Nishantha&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/srimaln91/comment/22b3i" aria-label="Report H.M.S.Nishantha&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"><a href="https://dev.to/report-abuse?url=https://dev.to/srimaln91/comment/22b3i" class="crayons-link crayons-link--block">Report abuse</a></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>An excellent reading. Thanks a lot!</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button" id="button-for-comment-956636" data-comment-id="956636" aria-label="like" data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="aikp57kfy90ko4whsekwghl6894vw8zk" class="crayons-icon reaction-icon not-reacted"><title id="aikp57kfy90ko4whsekwghl6894vw8zk">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="asz5rqaemg8xaijo3bp01dr6a88m1k99" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="asz5rqaemg8xaijo3bp01dr6a88m1k99">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">1</span><span class="reactions-label hidden m:inline-block">&nbsp;like</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd/comments/new/22b3i" data-comment-id="956636" data-path="/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd/comments/22b3i" data-tracking-name="comment_reply_button" data-testid="reply-button-956636" rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="aau4fk7dsyll39enoegkmaa170rqla5m" class="crayons-icon reaction-icon not-reacted"><title id="aau4fk7dsyll39enoegkmaa170rqla5m">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>

    <details class="comment-wrapper js-comment-wrapper comment-wrapper--deep-0
                    root
                    " open="">
      <summary aria-label="Toggle this comment (and replies)" data-tracking-name="expand_comment_toggle">
        <span class="m:mx-1 inline-block align-middle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="any8744etb9g8a0rjv1y6lgk1natzn9" class="crayons-icon expanded"><title id="any8744etb9g8a0rjv1y6lgk1natzn9">Collapse</title>
    <path d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z"></path>
</svg>

          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a2xpsu31j4aq6qufz01zpab251kx321w" class="crayons-icon collapsed"><title id="a2xpsu31j4aq6qufz01zpab251kx321w">Expand</title>
    <path d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z"></path>
</svg>

        </span>
        <span class="js-collapse-comment-content inline-block align-middle"></span>
      </summary>
  <div id="comment-node-1087901" class="
      comment single-comment-node
      
      root
      comment--deep-0
      
    " data-comment-id="1087901" data-path="/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd/comments/29n89" data-comment-author-id="1176319" data-content-user-id="1176319">
    <a name="comment-29n89" style="position: absolute; top: -8px;">&nbsp;</a>
    
<div class="comment__inner">
    <a href="https://dev.to/kirillivano" class="shrink-0 crayons-avatar m:crayons-avatar--l mt-4 m:mt-3">
    <img class="crayons-avatar__image" width="32" height="32" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_user_profile_image_1176319_ebc15a0a-a863-40ee-95e2-3e11173a7f4c.jpeg" alt="kirillivano profile image" loading="lazy">
  </a>


  <div class="inner-comment comment__details">
    <div class="comment__content crayons-card">
        


        <div class="comment__header">
  <a href="https://dev.to/kirillivano" class="crayons-link crayons-link--secondary flex items-center fw-medium m:hidden">
    <span class="js-comment-username">KirillIvano</span>
  </a>
  <div class="profile-preview-card relative mb-4 s:mb-0 fw-medium hidden m:block">
    <button id="comment-profile-preview-trigger-1087901" aria-controls="comment-profile-preview-content-1087901" class="profile-preview-card__trigger p-1 -my-1 -ml-1 crayons-btn crayons-btn--ghost" aria-label="KirillIvano profile details" aria-expanded="false" aria-haspopup="true" data-dropdown-initialized="true" data-initialized="true">
      KirillIvano
      
    </button>
    <div id="comment-profile-preview-content-1087901" class="profile-preview-card__content p-4 pt-0 branded-7 crayons-dropdown reverse" style="--card-color: #000000; border-top-color: var(--card-color);" data-testid="profile-preview-card" data-repositioning-dropdown="true">
    <div class="gap-4 grid">
        <div class="-mt-4">
  <a href="https://dev.to/kirillivano" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws(1).com_uploads_user_profile_image_1176319_ebc15a0a-a863-40ee-95e2-3e11173a7f4c.jpeg" class="crayons-avatar__image" alt="" loading="lazy">
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      KirillIvano
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:1176319,&quot;name&quot;:&quot;KirillIvano&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: KirillIvano" aria-pressed="false" data-fetched="fetched">Follow</button>
</div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2023-10-03T20:43:05Z" class="date" title="Wednesday, October 4, 2023 at 2:13:05 AM">Oct 4, 2023</time>
        </div>
      </li>
    </ul>
  </div>

    </div>
</div>

  </div>

  <span class="color-base-30 px-2 m:pl-0" role="presentation">•</span>

<a href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#comment-29n89" class="comment-date crayons-link crayons-link--secondary fs-s">
  <time datetime="2023-10-03T20:44:30Z" class="date-short-year" title="Wednesday, October 4, 2023 at 2:14:30 AM">Oct 4 '23</time>

</a>


  <div class="comment__dropdown" data-tracking-name="comment_dropdown">
    <button id="comment-dropdown-trigger-1087901" aria-controls="comment-dropdown-1087901" aria-expanded="false" class="dropbtn comment__dropdown-trigger crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon " aria-label="Toggle dropdown menu" aria-haspopup="true" data-dropdown-initialized="true" data-initialized="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="ai9ojqnrfhhv2p9yxqefrarhazmwksdv" class="crayons-icon pointer-events-none"><title id="ai9ojqnrfhhv2p9yxqefrarhazmwksdv">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

    </button>
    <div id="comment-dropdown-1087901" class="crayons-dropdown right-1 s:right-0 s:left-auto fs-base dropdown">
      <ul class="m-0">
        <li><a href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#comment-29n89" class="crayons-link crayons-link--block permalink-copybtn" aria-label="Copy link to KirillIvano&#39;s comment" data-no-instant="">Copy link</a></li>
        <li class="comment-actions hidden" data-user-id="1176319" data-action="settings-button" data-path="https://dev.to/kirillivano/comment/29n89/settings" aria-label="Go to KirillIvano&#39;s comment settings"></li>
          <li class="comment-actions hidden" data-action="hide-button" data-commentable-user-id="720068" data-user-id="1176319">
              <button class="flex justify-between crayons-link crayons-link--block w-100 bg-transparent border-0 hide-comment" data-hide-type="hide" data-comment-id="1087901" data-comment-url="https://dev.to/kirillivano/comment/29n89" aria-label="Hide KirillIvano&#39;s comment">
                Hide
              </button>
          </li>
        <li class="mod-actions hidden mod-actions-comment-button" data-path="https://dev.to/kirillivano/comment/29n89/mod" aria-label="Moderate KirillIvano&#39;s comment"></li>
        <li class="report-abuse-link-wrapper" data-path="/report-abuse?url=https://dev.to/kirillivano/comment/29n89" aria-label="Report KirillIvano&#39;s comment as abusive or violating our code of conduct and/or terms and conditions"><a href="https://dev.to/report-abuse?url=https://dev.to/kirillivano/comment/29n89" class="crayons-link crayons-link--block">Report abuse</a></li>
        <li class="current-user-actions"></li>
      </ul>
    </div>
  </div>
</div>


        <div class="
            comment__body
            text-styles
            text-styles--secondary
            body
            
            
          ">
          <p>Amazing article, thank you!</p>


        </div>

    </div>

    <script>
    </script>

    <footer class="comment__footer print-hidden">
  <button class="crayons-tooltip__activator crayons-btn crayons-btn--ghost crayons-btn--icon-left crayons-btn--s mr-1 reaction-like inline-flex reaction-button" id="button-for-comment-1087901" data-comment-id="1087901" aria-label="like" data-tracking-name="comment_heart_button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="a5cx4bdparnalctn8synsglg5ghdj87l" class="crayons-icon reaction-icon not-reacted"><title id="a5cx4bdparnalctn8synsglg5ghdj87l">Like comment: </title><path d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z"></path></svg>

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="a226ud39pmtgnsjga9f0f49uovysr340" class="crayons-icon crayons-icon reaction-icon--like reaction-icon reacted"><title id="a226ud39pmtgnsjga9f0f49uovysr340">Like comment: </title>
    <path d="M5.116 12.595a4.875 4.875 0 015.56-7.68h-.002L7.493 8.098l1.06 1.061 3.181-3.182a4.875 4.875 0 016.895 6.894L12 19.5l-6.894-6.894.01-.01z"></path>
</svg>

    <span class="reactions-count">1</span><span class="reactions-label hidden m:inline-block">&nbsp;like</span>
    <span data-testid="tooltip" class="crayons-tooltip__content">
      Like
    </span>
  </button>

      <a class="actions crayons-btn crayons-btn--ghost crayons-btn--s crayons-btn--icon-left toggle-reply-form mr-1 inline-flex" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd/comments/new/29n89" data-comment-id="1087901" data-path="/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd/comments/29n89" data-tracking-name="comment_reply_button" data-testid="reply-button-1087901" rel="nofollow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" role="img" aria-labelledby="aepotwisqn5nb5honx43eqzdm1dr64yg" class="crayons-icon reaction-icon not-reacted"><title id="aepotwisqn5nb5honx43eqzdm1dr64yg">Comment button</title><path d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z"></path></svg>

        <span class="hidden m:inline-block">Reply</span>
      </a>

</footer>

  </div>
</div>


  </div>
    </details>


        </div>
      </div>

      <div class="align-center">


  <nav class="fs-s align-center block" aria-label="Conduct controls">
  <a href="https://dev.to/code-of-conduct" class="crayons-link crayons-link--secondary">Code of Conduct</a>
  <span class="opacity-25 px-2" role="presentation">•</span>
  <a href="https://dev.to/report-abuse" class="crayons-link crayons-link--secondary">Report abuse</a>
</nav>

</div>

  </section>
  <div id="hide-comments-modal" class="hidden">
  <form id="hide-comments-modal__form" class="hide-comments-modal__form" data-type="json" action="https://dev.to/comments/hide" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="✓" autocomplete="off"><input type="hidden" name="_method" value="patch" autocomplete="off"><input type="hidden" name="authenticity_token" value="Jj_yewuZccBD-NzBKkb3VZvkC9JXAlFGDkbi_E7e8HIfT0W70QSekT0Unm8RPPjz9k7yycQZWFtUk1PQOeIMVA" autocomplete="off">
    <div class="hide-comments-modal__content">
      <p class="pb-2">
        Are you sure you want to hide this comment? It will become hidden in your post, but will still be visible via the comment's <a id="hide-comments-modal__comment-permalink" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#">permalink</a>.
      </p>
      <label class="crayons-field crayons-field--checkbox my-2">
        <input name="hide_children" type="hidden" value="0" autocomplete="off"><input class="hide_children crayons-checkbox" type="checkbox" value="1" name="hide_children" id="hide_children">
        <p class="crayons-field__label">Hide child comments as well</p>
      </label>
      <p class="pb-4 pt-2">
        <button type="submit" class="crayons-btn">
          Confirm
        </button>
      </p>
    </div>
</form>  <p class="fs-s color-base-60">For further actions, you may consider blocking this person and/or <a id="hide-comments-modal__report-link" href="https://dev.to/report-abuse">reporting abuse</a></p>
</div>



      </article>

      <div class="pb-4 crayons-layout__comments-billboard">
        <div class="js-billboard-container pb-4 crayons-layout__comments-billboard" data-async-url="/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd/bmar11/post_comments"><div>  <style>
  .long-bb-body {
    max-height: calc(100vh - 200px);
    overflow: hidden;
  }
  .long-bb-bottom {
    height: 180px;
    background: linear-gradient(to top, var(--card-bg), transparent);
    margin-top: -180px;
    position:relative;
    z-index: 5;
  }
</style>

  <div class="crayons-card crayons-card--secondary crayons-bb bb-placement js-billboard" style="" data-display-unit="" data-id="215778" data-category-click="click" data-category-impression="impression" data-context-type="article" data-special="nothing" data-article-id="952534" data-type-of="partner">
    <div class="crayons-bb__header relative">
    <div class="flex">
        <a href="https://dev.to/aws" target="_blank" rel="noopener" class="flex">
          <img width="24" height="24" class="radius-default crayons-bb__image" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_organization_profile_image_1726_e01690b9-c8bd-4eb9-bbe2-a4db25a702a9.png" alt="profile" loading="lazy">
          <div class="crayons-bb__title ml-2 fs-s fw-medium">AWS</div>
        </a>
        <span class="crayons-bb__indicator c-indicator c-indicator--subtle c-indicator--round fs-2xs fw-medium ml-2 py-1 px-2">Promoted</span>
    </div>

  <button id="sponsorship-dropdown-trigger-215778" aria-controls="sponsorship-dropdown-215778" aria-expanded="false" aria-haspopup="true" class="dropBtn crayons-bb__dropdown crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon" aria-label="Toggle dropdown menu" data-dropdown-initialized="true" data-initialized="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="atd1f25zzfm0zs9fi1nwconwomsyxi12" class="crayons-icon pointer-events-none"><title id="atd1f25zzfm0zs9fi1nwconwomsyxi12">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

  </button>

  <div id="sponsorship-dropdown-215778" class="crayons-dropdown bb-dropdown right-0">
    <ul class="list-none m-0">
        <li>
          <a class="crayons-link crayons-link--block" href="https://dev.to/billboards">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 100-16 8 8 0 000 16zM11 7h2v2h-2V7zm0 4h2v6h-2v-6z"></path>
</svg>

            What's a billboard?
          </a>
        </li>
      <li>
        <a class="crayons-link crayons-link--block" href="https://dev.to/settings/customization#sponsors">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M3.34 16.9999C2.91727 16.2689 2.58866 15.4874 2.362 14.6739C2.85531 14.423 3.26959 14.0406 3.55903 13.5688C3.84846 13.0971 4.00176 12.5545 4.00197 12.0011C4.00218 11.4476 3.84928 10.9049 3.5602 10.4329C3.27112 9.961 2.85712 9.57821 2.364 9.32694C2.81604 7.69243 3.67673 6.1999 4.865 4.98994C5.32909 5.29167 5.86762 5.45911 6.42098 5.47373C6.97434 5.48834 7.52095 5.34958 8.00033 5.07278C8.47971 4.79598 8.87315 4.39194 9.13713 3.90539C9.4011 3.41883 9.52531 2.86872 9.496 2.31594C11.1381 1.89157 12.8612 1.89226 14.503 2.31795C14.474 2.87071 14.5984 3.42073 14.8626 3.90715C15.1268 4.39357 15.5204 4.79742 15.9998 5.07401C16.4793 5.35059 17.0259 5.48913 17.5793 5.4743C18.1326 5.45946 18.671 5.29183 19.135 4.98994C19.714 5.57994 20.228 6.25095 20.66 6.99995C21.093 7.74895 21.417 8.52995 21.638 9.32595C21.1447 9.57685 20.7304 9.95932 20.441 10.4311C20.1515 10.9028 19.9982 11.4454 19.998 11.9988C19.9978 12.5523 20.1507 13.095 20.4398 13.5669C20.7289 14.0389 21.1429 14.4217 21.636 14.6729C21.184 16.3075 20.3233 17.8 19.135 19.0099C18.6709 18.7082 18.1324 18.5408 17.579 18.5262C17.0257 18.5115 16.479 18.6503 15.9997 18.9271C15.5203 19.2039 15.1268 19.6079 14.8629 20.0945C14.5989 20.5811 14.4747 21.1312 14.504 21.6839C12.8619 22.1083 11.1388 22.1076 9.497 21.6819C9.52605 21.1292 9.4016 20.5792 9.13742 20.0927C8.87324 19.6063 8.47964 19.2025 8.00017 18.9259C7.5207 18.6493 6.97405 18.5108 6.42073 18.5256C5.8674 18.5404 5.32896 18.7081 4.865 19.0099C4.27399 18.4069 3.76159 17.7315 3.34 16.9999ZM9 17.1959C10.0656 17.8106 10.8668 18.797 11.25 19.9659C11.749 20.0129 12.25 20.0139 12.749 19.9669C13.1324 18.7978 13.934 17.8114 15 17.1969C16.0652 16.5806 17.3205 16.3794 18.525 16.6319C18.815 16.2239 19.065 15.7889 19.273 15.3339C18.4524 14.4174 17.9991 13.2302 18 11.9999C18 10.7399 18.47 9.56295 19.273 8.66595C19.0635 8.21109 18.8125 7.77658 18.523 7.36795C17.3193 7.62025 16.0648 7.41942 15 6.80395C13.9344 6.18932 13.1332 5.20293 12.75 4.03394C12.251 3.98694 11.75 3.98594 11.251 4.03294C10.8676 5.20209 10.066 6.1885 9 6.80295C7.93478 7.41926 6.67948 7.62046 5.475 7.36795C5.18556 7.77623 4.93513 8.21081 4.727 8.66595C5.54757 9.5825 6.00088 10.7697 6 11.9999C6 13.2599 5.53 14.4369 4.727 15.3339C4.93647 15.7888 5.18754 16.2233 5.477 16.6319C6.68072 16.3796 7.93521 16.5805 9 17.1959ZM12 14.9999C11.2044 14.9999 10.4413 14.6839 9.87868 14.1213C9.31607 13.5587 9 12.7956 9 11.9999C9 11.2043 9.31607 10.4412 9.87868 9.87862C10.4413 9.31602 11.2044 8.99995 12 8.99995C12.7956 8.99995 13.5587 9.31602 14.1213 9.87862C14.6839 10.4412 15 11.2043 15 11.9999C15 12.7956 14.6839 13.5587 14.1213 14.1213C13.5587 14.6839 12.7956 14.9999 12 14.9999ZM12 12.9999C12.2652 12.9999 12.5196 12.8946 12.7071 12.7071C12.8946 12.5195 13 12.2652 13 11.9999C13 11.7347 12.8946 11.4804 12.7071 11.2928C12.5196 11.1053 12.2652 10.9999 12 10.9999C11.7348 10.9999 11.4804 11.1053 11.2929 11.2928C11.1054 11.4804 11 11.7347 11 11.9999C11 12.2652 11.1054 12.5195 11.2929 12.7071C11.4804 12.8946 11.7348 12.9999 12 12.9999Z" fill="black"></path>
</svg>

          Manage preferences
        </a>
      </li>
      <hr>
      <li>
        <a class="crayons-link crayons-link--block" href="https://dev.to/report-abuse?billboard=215778">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M12.382 3a1 1 0 0 1 .894.553L14 5h6a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1h-6.382a1 1 0 0 1-.894-.553L12 16H5v6H3V3h9.382Zm-.618 2H5v9h8.236l1 2H19V7h-6.236l-1-2Z"></path>
</svg>

          Report billboard
        </a>
      </li>
    </ul>
  </div>
</div>

    <div class="p-1 pt-3 text-styles text-styles--billboard">
      <p><a href="https://aws.bpc.digital/4gm9vnt?bb=215778" target="_blank" rel="noopener noreferrer"><img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___i.imgur.com_mTnhNMZ.png" alt="AWS GenAI LIVE image" width="1080" height="1080" loading="lazy"></a></p>
<h2>  <a name="how-is-generative-ai-increasing-efficiency" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#how-is-generative-ai-increasing-efficiency">  </a>  <a href="https://aws.bpc.digital/4gm9vnt?bb=215778" target="_blank" rel="noopener noreferrer">How is generative AI increasing efficiency?</a>
</h2>
<p>Join AWS GenAI LIVE! to find out how gen AI is reshaping productivity, streamlining processes, and driving innovation.</p>
<p><a href="https://aws.bpc.digital/4gm9vnt?bb=215778" class="ltag_cta ltag_cta--branded" role="button">Learn more</a></p>
    </div>
  </div>

</div></div>
      </div>

          <section class="crayons-card crayons-card--secondary text-padding mb-4 print-hidden" id="bottom-content-read-next">
    <h2 class="crayons-subtitle-1">Read next</h2>
      <a href="https://dev.to/seanevans/sending-both-file-and-json-in-one-request-to-spring-boot-3mgb" data-preload-image="https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fok9vmjwphzgp9azas4e3.png" class="crayons-link mt-6 block">
        <div class="flex items-center">
          <span class="crayons-avatar crayons-avatar--xl m:crayons-avatar--2xl mr-4 shrink-0">
              <img loading="lazy" alt="seanevans profile image" class="crayons-avatar__image" width="100" height="100" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_user_profile_image_973675_a9b73b68-29ea-4b43-a012-69b6bfbd73c9.png">
          </span>
          <div>
            <h3 class="fs-xl mb-0 lh-tight">Sending both File and JSON in One Request to Spring Boot</h3>
            <p class="opacity-75 pt-1">
              Sean Evans - <time datetime="2024-12-18T08:27:45Z">Dec 18 '24</time>
            </p>
          </div>
        </div>
      </a>
      <a href="https://dev.to/layssadev/tudo-o-que-voce-precisa-saber-sobre-nextjs-para-iniciar-um-novo-projeto-hoje-2cg2" data-preload-image="" class="crayons-link mt-6 block">
        <div class="flex items-center">
          <span class="crayons-avatar crayons-avatar--xl m:crayons-avatar--2xl mr-4 shrink-0">
              <img loading="lazy" alt="layssadev profile image" class="crayons-avatar__image" width="100" height="100" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_user_profile_image_884196_6281af20-a30c-481f-a56b-21d9d8dc046c.jpeg">
          </span>
          <div>
            <h3 class="fs-xl mb-0 lh-tight">Tudo o que você precisa saber sobre Next.JS para iniciar um novo projeto hoje</h3>
            <p class="opacity-75 pt-1">
              Layssa Lima - <time datetime="2024-12-18T22:12:24Z">Dec 18 '24</time>
            </p>
          </div>
        </div>
      </a>
      <a href="https://dev.to/hamzakhan/why-typescript-is-better-than-vanilla-javascript-a-technical-deep-dive-1h4h" data-preload-image="" class="crayons-link mt-6 block">
        <div class="flex items-center">
          <span class="crayons-avatar crayons-avatar--xl m:crayons-avatar--2xl mr-4 shrink-0">
              <img loading="lazy" alt="hamzakhan profile image" class="crayons-avatar__image" width="100" height="100" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_user_profile_image_1463005_b8a50eb6-24bd-476f-bd78-9f370403e053.png">
          </span>
          <div>
            <h3 class="fs-xl mb-0 lh-tight">🚀 Why TypeScript is Better Than Vanilla JavaScript: A Technical Deep Dive 🛠️</h3>
            <p class="opacity-75 pt-1">
              Hamza Khan - <time datetime="2024-12-18T05:49:25Z">Dec 18 '24</time>
            </p>
          </div>
        </div>
      </a>
      <a href="https://dev.to/coder7475/how-to-securely-deploy-node-app-to-ubuntu-server-47e5" data-preload-image="https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F0rg6as2cgia72gizvf5y.png" class="crayons-link mt-6 block">
        <div class="flex items-center">
          <span class="crayons-avatar crayons-avatar--xl m:crayons-avatar--2xl mr-4 shrink-0">
              <img loading="lazy" alt="coder7475 profile image" class="crayons-avatar__image" width="100" height="100" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_user_profile_image_1154037_d7443f19-1bdc-4c57-b139-aa184bb62d61.jpg">
          </span>
          <div>
            <h3 class="fs-xl mb-0 lh-tight">How to Securely Deploy Node App to Ubuntu Server</h3>
            <p class="opacity-75 pt-1">
              coder7475 - <time datetime="2024-12-18T13:54:22Z">Dec 18 '24</time>
            </p>
          </div>
        </div>
      </a>
  </section>

    </div>
  </main>

  <aside class="crayons-layout__sidebar-right" aria-label="Author details">
    <div class="crayons-article-sticky grid gap-4 pb-4 break-word" id="article-show-primary-sticky-nav">
  <div class="crayons-card crayons-card--secondary branded-7 p-4 pt-0 gap-4 grid" style="border-top-color: #000000;">
    <div class="-mt-4">
  <a href="https://dev.to/hgsgtk" class="flex">
    <span class="crayons-avatar crayons-avatar--xl  mr-2 shrink-0">
      <img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws(1).com_uploads_user_profile_image_720068_5c781aa5-1963-47e4-9958-4d875c5d9aaa.jpeg" class="crayons-avatar__image" alt="" loading="lazy">
    </span>
    <span class="crayons-link crayons-subtitle-2 mt-5">
      Kazuki Higashiguchi
      
    </span>
  </a>
</div>

<div class="print-hidden">
  <button name="button" type="button" data-info="{&quot;className&quot;:&quot;User&quot;,&quot;style&quot;:&quot;&quot;,&quot;id&quot;:720068,&quot;name&quot;:&quot;Kazuki Higashiguchi&quot;}" class="crayons-btn follow-action-button whitespace-nowrap w-100 follow-user" aria-label="Follow user: Kazuki Higashiguchi" aria-pressed="false" data-fetched="fetched">Follow</button>
</div>
  <div class="color-base-70">
    A software engineer,  a gopher, an agile testing practitioner
  </div>

  <div class="user-metadata-details">
    <ul class="user-metadata-details-inner">
        <li>
          <div class="key">
            Location
          </div>
          <div class="value">
            Tokyo, Japan
          </div>
        </li>
          <li>
            <div class="key">
              Work
            </div>
            <div class="value">
              Backend engineer at Autify, Inc.
            </div>
          </li>
      <li>
        <div class="key">
          Joined
        </div>
        <div class="value">
          <time datetime="2021-10-06T00:54:30Z" class="date">Oct 6, 2021</time>
        </div>
      </li>
    </ul>
  </div>

  </div>

      <div class="crayons-card crayons-card--secondary">
        <header class="crayons-card__header">
          <h3 class="crayons-subtitle-2">
            More from <a href="https://dev.to/hgsgtk">Kazuki Higashiguchi</a>
          </h3>
        </header>
        <div>
            <a class="crayons-link crayons-link--contentful" href="https://dev.to/hgsgtk/go-118-new-function-cut-added-to-stringsbytes-package-5c2f">
              Go 1.18: Cut added to strings/bytes
              <div class="crayons-link__secondary -ml-1">
                  <span class="mr-1"><span class="opacity-50">#</span>go</span>
              </div>
            </a>
            <a class="crayons-link crayons-link--contentful" href="https://dev.to/hgsgtk/reverse-http-proxy-over-websocket-in-go-part-5-2i0f">
              Reverse HTTP proxy over WebSocket in Go (Part 5)
              <div class="crayons-link__secondary -ml-1">
                  <span class="mr-1"><span class="opacity-50">#</span>go</span>
                  <span class="mr-1"><span class="opacity-50">#</span>webdev</span>
                  <span class="mr-1"><span class="opacity-50">#</span>websocket</span>
              </div>
            </a>
            <a class="crayons-link crayons-link--contentful" href="https://dev.to/hgsgtk/reverse-http-proxy-over-websocket-in-go-part-4-3g7c">
              Reverse HTTP proxy over WebSocket in Go (Part 4)
              <div class="crayons-link__secondary -ml-1">
                  <span class="mr-1"><span class="opacity-50">#</span>go</span>
                  <span class="mr-1"><span class="opacity-50">#</span>webdev</span>
                  <span class="mr-1"><span class="opacity-50">#</span>websocket</span>
              </div>
            </a>
        </div>
      </div>
</div>

<div class="crayons-article-sticky grid gap-4 break-word js-billboard-container" data-async-url="/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd/bmar11/post_sidebar"><div>  <style>
  .long-bb-body {
    max-height: calc(100vh - 200px);
    overflow: hidden;
  }
  .long-bb-bottom {
    height: 180px;
    background: linear-gradient(to top, var(--card-bg), transparent);
    margin-top: -180px;
    position:relative;
    z-index: 5;
  }
</style>

  <div class="crayons-card crayons-card--secondary crayons-bb bb-placement js-billboard" style="" data-display-unit="" data-id="215967" data-category-click="click" data-category-impression="impression" data-context-type="article" data-special="nothing" data-article-id="952534" data-type-of="partner" data-impression-recorded="true">
    <div class="crayons-bb__header relative">
    <div class="flex">
        <a href="https://dev.to/qodo" target="_blank" rel="noopener" class="flex">
          <img width="24" height="24" class="radius-default crayons-bb__image" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws.com_uploads_organization_profile_image_10470_b549837f-79f9-45a2-9b4a-963a469d9430.jpeg" alt="profile" loading="lazy">
          <div class="crayons-bb__title ml-2 fs-s fw-medium">Qodo</div>
        </a>
        <span class="crayons-bb__indicator c-indicator c-indicator--subtle c-indicator--round fs-2xs fw-medium ml-2 py-1 px-2">Promoted</span>
    </div>

  <button id="sponsorship-dropdown-trigger-215967" aria-controls="sponsorship-dropdown-215967" aria-expanded="false" aria-haspopup="true" class="dropBtn crayons-bb__dropdown crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon" aria-label="Toggle dropdown menu" data-dropdown-initialized="true" data-initialized="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="asl2mu68gp9n0hspsukqir5gtn9esijf" class="crayons-icon pointer-events-none"><title id="asl2mu68gp9n0hspsukqir5gtn9esijf">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

  </button>

  <div id="sponsorship-dropdown-215967" class="crayons-dropdown bb-dropdown right-0">
    <ul class="list-none m-0">
        <li>
          <a class="crayons-link crayons-link--block" href="https://dev.to/billboards">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 100-16 8 8 0 000 16zM11 7h2v2h-2V7zm0 4h2v6h-2v-6z"></path>
</svg>

            What's a billboard?
          </a>
        </li>
      <li>
        <a class="crayons-link crayons-link--block" href="https://dev.to/settings/customization#sponsors">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M3.34 16.9999C2.91727 16.2689 2.58866 15.4874 2.362 14.6739C2.85531 14.423 3.26959 14.0406 3.55903 13.5688C3.84846 13.0971 4.00176 12.5545 4.00197 12.0011C4.00218 11.4476 3.84928 10.9049 3.5602 10.4329C3.27112 9.961 2.85712 9.57821 2.364 9.32694C2.81604 7.69243 3.67673 6.1999 4.865 4.98994C5.32909 5.29167 5.86762 5.45911 6.42098 5.47373C6.97434 5.48834 7.52095 5.34958 8.00033 5.07278C8.47971 4.79598 8.87315 4.39194 9.13713 3.90539C9.4011 3.41883 9.52531 2.86872 9.496 2.31594C11.1381 1.89157 12.8612 1.89226 14.503 2.31795C14.474 2.87071 14.5984 3.42073 14.8626 3.90715C15.1268 4.39357 15.5204 4.79742 15.9998 5.07401C16.4793 5.35059 17.0259 5.48913 17.5793 5.4743C18.1326 5.45946 18.671 5.29183 19.135 4.98994C19.714 5.57994 20.228 6.25095 20.66 6.99995C21.093 7.74895 21.417 8.52995 21.638 9.32595C21.1447 9.57685 20.7304 9.95932 20.441 10.4311C20.1515 10.9028 19.9982 11.4454 19.998 11.9988C19.9978 12.5523 20.1507 13.095 20.4398 13.5669C20.7289 14.0389 21.1429 14.4217 21.636 14.6729C21.184 16.3075 20.3233 17.8 19.135 19.0099C18.6709 18.7082 18.1324 18.5408 17.579 18.5262C17.0257 18.5115 16.479 18.6503 15.9997 18.9271C15.5203 19.2039 15.1268 19.6079 14.8629 20.0945C14.5989 20.5811 14.4747 21.1312 14.504 21.6839C12.8619 22.1083 11.1388 22.1076 9.497 21.6819C9.52605 21.1292 9.4016 20.5792 9.13742 20.0927C8.87324 19.6063 8.47964 19.2025 8.00017 18.9259C7.5207 18.6493 6.97405 18.5108 6.42073 18.5256C5.8674 18.5404 5.32896 18.7081 4.865 19.0099C4.27399 18.4069 3.76159 17.7315 3.34 16.9999ZM9 17.1959C10.0656 17.8106 10.8668 18.797 11.25 19.9659C11.749 20.0129 12.25 20.0139 12.749 19.9669C13.1324 18.7978 13.934 17.8114 15 17.1969C16.0652 16.5806 17.3205 16.3794 18.525 16.6319C18.815 16.2239 19.065 15.7889 19.273 15.3339C18.4524 14.4174 17.9991 13.2302 18 11.9999C18 10.7399 18.47 9.56295 19.273 8.66595C19.0635 8.21109 18.8125 7.77658 18.523 7.36795C17.3193 7.62025 16.0648 7.41942 15 6.80395C13.9344 6.18932 13.1332 5.20293 12.75 4.03394C12.251 3.98694 11.75 3.98594 11.251 4.03294C10.8676 5.20209 10.066 6.1885 9 6.80295C7.93478 7.41926 6.67948 7.62046 5.475 7.36795C5.18556 7.77623 4.93513 8.21081 4.727 8.66595C5.54757 9.5825 6.00088 10.7697 6 11.9999C6 13.2599 5.53 14.4369 4.727 15.3339C4.93647 15.7888 5.18754 16.2233 5.477 16.6319C6.68072 16.3796 7.93521 16.5805 9 17.1959ZM12 14.9999C11.2044 14.9999 10.4413 14.6839 9.87868 14.1213C9.31607 13.5587 9 12.7956 9 11.9999C9 11.2043 9.31607 10.4412 9.87868 9.87862C10.4413 9.31602 11.2044 8.99995 12 8.99995C12.7956 8.99995 13.5587 9.31602 14.1213 9.87862C14.6839 10.4412 15 11.2043 15 11.9999C15 12.7956 14.6839 13.5587 14.1213 14.1213C13.5587 14.6839 12.7956 14.9999 12 14.9999ZM12 12.9999C12.2652 12.9999 12.5196 12.8946 12.7071 12.7071C12.8946 12.5195 13 12.2652 13 11.9999C13 11.7347 12.8946 11.4804 12.7071 11.2928C12.5196 11.1053 12.2652 10.9999 12 10.9999C11.7348 10.9999 11.4804 11.1053 11.2929 11.2928C11.1054 11.4804 11 11.7347 11 11.9999C11 12.2652 11.1054 12.5195 11.2929 12.7071C11.4804 12.8946 11.7348 12.9999 12 12.9999Z" fill="black"></path>
</svg>

          Manage preferences
        </a>
      </li>
      <hr>
      <li>
        <a class="crayons-link crayons-link--block" href="https://dev.to/report-abuse?billboard=215967">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M12.382 3a1 1 0 0 1 .894.553L14 5h6a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1h-6.382a1 1 0 0 1-.894-.553L12 16H5v6H3V3h9.382Zm-.618 2H5v9h8.236l1 2H19V7h-6.236l-1-2Z"></path>
</svg>

          Report billboard
        </a>
      </li>
    </ul>
  </div>
</div>

    <div class="p-1 pt-3 text-styles text-styles--billboard">
      <p><a href="https://dev.to/qodo/introducing-qodo-gen-10-transform-your-workflow-with-agentic-ai-5a96?bb=215967"><img src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___i.imgur(1).com_OIquUjW.png" alt="Qodo Takeover" width="4096" height="1720" loading="lazy"></a></p>
<h2>  <a name="introducing-qodo-gen-10-transform-your-workflow-with-agentic-ai" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#introducing-qodo-gen-10-transform-your-workflow-with-agentic-ai">  </a>  <a href="https://dev.to/qodo/introducing-qodo-gen-10-transform-your-workflow-with-agentic-ai-5a96?bb=215967">Introducing Qodo Gen 1.0: Transform Your Workflow with Agentic AI</a>
</h2>
<p>Rather than just generating snippets, our agents understand your entire project context, can make decisions, use tools, and carry out tasks autonomously.</p>
<p><a href="https://dev.to/qodo/introducing-qodo-gen-10-transform-your-workflow-with-agentic-ai-5a96?bb=215967" class="ltag_cta ltag_cta--branded" role="button">Read full post →</a></p>
    </div>
  </div>

</div></div>

  </aside>
</div>


<div class="mod-actions-menu print-hidden"></div>
<div data-testid="unpublish-post-modal-container" class="unpublish-post-modal-container hidden"></div>

<div class="fullscreen-code js-fullscreen-code"></div>
<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/followButtons-f2455d1f50a862b83fa006b1953e3a1644598781243cae25d3e75b13c04184fd.js.download" defer="defer"></script>
<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/billboard-f7c8c27ea139e85e7eb2a1adec43d4757a9edf002f434e8ba0eca486c39a6e60.js.download" defer="defer"></script>
<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/localizeArticleDates-70147c5c6bfe350b42e020ebb2a3dd37419d83978982b5a67b6389119bf162ac.js.download" defer="defer"></script>
<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/articleReactions-79a44d82fb34a91c3987c24cfd3bcf2b0d38a02730b69ae6da297387d185f015.js.download" defer="defer"></script>

<script>
  function activateRunkitTags() {
  if (!areAnyRunkitTagsPresent())
    return

  var checkRunkit = setInterval(function() {
    try {
      dynamicallyLoadRunkitLibrary()

      if (typeof(RunKit) === 'undefined') {
        return
      }

      replaceTagContentsWithRunkitWidget()
      clearInterval(checkRunkit);
    } catch(e) {
      console.error(e);
      clearInterval(checkRunkit);
    }
  }, 200);
}

function isRunkitTagAlreadyActive(runkitTag) {
  return runkitTag.querySelector("iframe") !== null;
};

function areAnyRunkitTagsPresent() {
  var presentRunkitTags = document.getElementsByClassName("runkit-element");

  return presentRunkitTags.length > 0
}

function replaceTagContentsWithRunkitWidget() {
  var targets = document.getElementsByClassName("runkit-element");
  for (var i = 0; i < targets.length; i++) {
    if (isRunkitTagAlreadyActive(targets[i])) {
      continue;
    }

    var wrapperContent = targets[i].textContent;
    if (/^(<iframe src)/.test(wrapperContent) === false) {
      if (targets[i].children.length > 0) {
        var preamble = targets[i].children[0].textContent;
        var content = targets[i].children[1].textContent;
        targets[i].innerHTML = "";
        var notebook = RunKit.createNotebook({
          element: targets[i],
          source: content,
          preamble: preamble
        });
      }
    }
  }
};

function dynamicallyLoadRunkitLibrary() {
  if (typeof(dynamicallyLoadScript) === "undefined")
    return

  dynamicallyLoadScript("//embed.runkit.com")
}

activateRunkitTags();

</script>
<div class="js-billboard-container pb-4 crayons-layout__comments-billboard" data-async-url="/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd/bmar11/post_fixed_bottom"><div>  <style>
  .long-bb-body {
    max-height: calc(100vh - 200px);
    overflow: hidden;
  }
  .long-bb-bottom {
    height: 180px;
    background: linear-gradient(to top, var(--card-bg), transparent);
    margin-top: -180px;
    position:relative;
    z-index: 5;
  }
</style>

  <div class="crayons-card crayons-card--secondary crayons-bb popover-billboard crayons-story__billboard js-billboard fixed bottom-0 left-0 right-0" style="overflow-y: revert; display: none;" data-display-unit="" data-id="212189" data-category-click="click" data-category-impression="impression" data-context-type="article" data-dismissal-sku="" data-special="nothing" data-article-id="952534" data-type-of="in_house">
    <div class="flex">
      <div class="crayons-bb__header relative">
    <div class="crayons-bb__title">👋 Kindness is contagious</div>

  <button id="sponsorship-dropdown-trigger-212189" aria-controls="sponsorship-dropdown-212189" aria-expanded="false" aria-haspopup="true" class="dropBtn crayons-bb__dropdown crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon" aria-label="Toggle dropdown menu" data-dropdown-initialized="true" data-initialized="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="an30uhe4lwfldayjs4ax8pdknn7t97ua" class="crayons-icon pointer-events-none"><title id="an30uhe4lwfldayjs4ax8pdknn7t97ua">Dropdown menu</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 12a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5.25 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3.75 1.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>

  </button>

  <div id="sponsorship-dropdown-212189" class="crayons-dropdown bb-dropdown right-0">
    <ul class="list-none m-0">
        <li>
          <a class="crayons-link crayons-link--block" href="https://dev.to/billboards">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 100-16 8 8 0 000 16zM11 7h2v2h-2V7zm0 4h2v6h-2v-6z"></path>
</svg>

            What's a billboard?
          </a>
        </li>
      <li>
        <a class="crayons-link crayons-link--block" href="https://dev.to/settings/customization#sponsors">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M3.34 16.9999C2.91727 16.2689 2.58866 15.4874 2.362 14.6739C2.85531 14.423 3.26959 14.0406 3.55903 13.5688C3.84846 13.0971 4.00176 12.5545 4.00197 12.0011C4.00218 11.4476 3.84928 10.9049 3.5602 10.4329C3.27112 9.961 2.85712 9.57821 2.364 9.32694C2.81604 7.69243 3.67673 6.1999 4.865 4.98994C5.32909 5.29167 5.86762 5.45911 6.42098 5.47373C6.97434 5.48834 7.52095 5.34958 8.00033 5.07278C8.47971 4.79598 8.87315 4.39194 9.13713 3.90539C9.4011 3.41883 9.52531 2.86872 9.496 2.31594C11.1381 1.89157 12.8612 1.89226 14.503 2.31795C14.474 2.87071 14.5984 3.42073 14.8626 3.90715C15.1268 4.39357 15.5204 4.79742 15.9998 5.07401C16.4793 5.35059 17.0259 5.48913 17.5793 5.4743C18.1326 5.45946 18.671 5.29183 19.135 4.98994C19.714 5.57994 20.228 6.25095 20.66 6.99995C21.093 7.74895 21.417 8.52995 21.638 9.32595C21.1447 9.57685 20.7304 9.95932 20.441 10.4311C20.1515 10.9028 19.9982 11.4454 19.998 11.9988C19.9978 12.5523 20.1507 13.095 20.4398 13.5669C20.7289 14.0389 21.1429 14.4217 21.636 14.6729C21.184 16.3075 20.3233 17.8 19.135 19.0099C18.6709 18.7082 18.1324 18.5408 17.579 18.5262C17.0257 18.5115 16.479 18.6503 15.9997 18.9271C15.5203 19.2039 15.1268 19.6079 14.8629 20.0945C14.5989 20.5811 14.4747 21.1312 14.504 21.6839C12.8619 22.1083 11.1388 22.1076 9.497 21.6819C9.52605 21.1292 9.4016 20.5792 9.13742 20.0927C8.87324 19.6063 8.47964 19.2025 8.00017 18.9259C7.5207 18.6493 6.97405 18.5108 6.42073 18.5256C5.8674 18.5404 5.32896 18.7081 4.865 19.0099C4.27399 18.4069 3.76159 17.7315 3.34 16.9999ZM9 17.1959C10.0656 17.8106 10.8668 18.797 11.25 19.9659C11.749 20.0129 12.25 20.0139 12.749 19.9669C13.1324 18.7978 13.934 17.8114 15 17.1969C16.0652 16.5806 17.3205 16.3794 18.525 16.6319C18.815 16.2239 19.065 15.7889 19.273 15.3339C18.4524 14.4174 17.9991 13.2302 18 11.9999C18 10.7399 18.47 9.56295 19.273 8.66595C19.0635 8.21109 18.8125 7.77658 18.523 7.36795C17.3193 7.62025 16.0648 7.41942 15 6.80395C13.9344 6.18932 13.1332 5.20293 12.75 4.03394C12.251 3.98694 11.75 3.98594 11.251 4.03294C10.8676 5.20209 10.066 6.1885 9 6.80295C7.93478 7.41926 6.67948 7.62046 5.475 7.36795C5.18556 7.77623 4.93513 8.21081 4.727 8.66595C5.54757 9.5825 6.00088 10.7697 6 11.9999C6 13.2599 5.53 14.4369 4.727 15.3339C4.93647 15.7888 5.18754 16.2233 5.477 16.6319C6.68072 16.3796 7.93521 16.5805 9 17.1959ZM12 14.9999C11.2044 14.9999 10.4413 14.6839 9.87868 14.1213C9.31607 13.5587 9 12.7956 9 11.9999C9 11.2043 9.31607 10.4412 9.87868 9.87862C10.4413 9.31602 11.2044 8.99995 12 8.99995C12.7956 8.99995 13.5587 9.31602 14.1213 9.87862C14.6839 10.4412 15 11.2043 15 11.9999C15 12.7956 14.6839 13.5587 14.1213 14.1213C13.5587 14.6839 12.7956 14.9999 12 14.9999ZM12 12.9999C12.2652 12.9999 12.5196 12.8946 12.7071 12.7071C12.8946 12.5195 13 12.2652 13 11.9999C13 11.7347 12.8946 11.4804 12.7071 11.2928C12.5196 11.1053 12.2652 10.9999 12 10.9999C11.7348 10.9999 11.4804 11.1053 11.2929 11.2928C11.1054 11.4804 11 11.7347 11 11.9999C11 12.2652 11.1054 12.5195 11.2929 12.7071C11.4804 12.8946 11.7348 12.9999 12 12.9999Z" fill="black"></path>
</svg>

          Manage preferences
        </a>
      </li>
      <hr>
      <li>
        <a class="crayons-link crayons-link--block" href="https://dev.to/report-abuse?billboard=212189">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" role="img" aria-hidden="true" class="crayons-icon c-btn__icon">
    <path d="M12.382 3a1 1 0 0 1 .894.553L14 5h6a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1h-6.382a1 1 0 0 1-.894-.553L12 16H5v6H3V3h9.382Zm-.618 2H5v9h8.236l1 2H19V7h-6.236l-1-2Z"></path>
</svg>

          Report billboard
        </a>
      </li>
    </ul>
  </div>
</div>

      <button id="sponsorship-close-trigger-212189" aria-controls="sponsorship-close-212189" class="crayons-btn crayons-btn--s crayons-btn--ghost crayons-btn--icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-labelledby="agzr6168196kiqwlh4el3sdo8l8tmelp" class="crayons-icon pointer-events-none"><title id="agzr6168196kiqwlh4el3sdo8l8tmelp">Close</title><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636l4.95 4.95z"></path></svg>

      </button>
    </div>
    <div class="p-1 text-styles text-styles--billboard">
      <p>Please leave a ❤️ or a friendly comment on this post if you found it helpful!</p>
<h3>  <a name="-cta-httpsdevtoenterstatenewuser-" href="https://dev.to/hgsgtk/how-go-handles-network-and-system-calls-when-tcp-server-1nbd#-cta-httpsdevtoenterstatenewuser-">  </a>  <a href="https://dev.to/enter?state=new-user&amp;bb=212189" class="ltag_cta ltag_cta--branded" role="button">Okay</a>
</h3>
    </div>
  </div>

</div></div>


    <div id="runtime-banner-container"></div>
  </div>
</div>
    

<footer id="footer" class="crayons-footer print-hidden">
  <div id="footer-container" class="crayons-footer__container">



    <p class="fs-s crayons-footer__description">
      <a class="c-link c-link--branded fw-medium" aria-label="DEV Community Home" href="https://dev.to/">DEV Community</a> — A constructive and inclusive social network for software developers. With you every step of your journey.
    </p>

    <ul class="footer__nav-links flex gap-2 justify-center flex-wrap fs-s p-0" style="">
        <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/">
      Home
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/++">
      DEV++
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/pod">
      Podcasts
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/videos">
      Videos
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/tags">
      Tags
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/help">
      DEV Help
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://shop.forem.com/" target="_blank" rel="noopener noreferrer">
      Forem Shop
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/advertise">
      Advertise on DEV
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/challenges">
      DEV Challenges
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/showcase">
      DEV Showcase
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/about">
      About
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/contact">
      Contact
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/free-postgres-database-tier">
      Free Postgres Database
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/software-comparisons">
      Software comparisons
    </a>
    <span class="dot ml-2"></span>
  </li>

    </ul>

    <ul class="footer__nav-links flex gap-2 justify-center flex-wrap fs-s p-0" style="">
        <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/code-of-conduct">
      Code of Conduct
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/privacy">
      Privacy Policy
    </a>
    <span class="dot ml-2"></span>
  </li>
  <li class="footer__nav-link flex items-center">
    <a href="https://dev.to/terms">
      Terms of use
    </a>
    <span class="dot ml-2"></span>
  </li>

    </ul>

    <div class="fs-s">
      <p>Built on <a class="c-link c-link--branded" target="_blank" rel="noopener noreferrer" href="https://www.forem.com/">Forem</a> — the <a target="_blank" rel="noopener" class="c-link c-link--branded" href="https://dev.to/t/opensource">open source</a> software that powers <a target="_blank" rel="noopener" class="c-link c-link--branded" href="https://dev.to/">DEV</a> and other inclusive communities.</p>
      <p>Made with love and <a target="_blank" rel="noopener" class="c-link c-link--branded" href="https://dev.to/t/rails">Ruby on Rails</a>. DEV Community <span title="copyright">©</span> 2016 - 2025.</p>
    </div>
  </div>
</footer>
<div id="snack-zone"></div>

    <div id="global-signup-modal" class="authentication-modal hidden">
  <div class="authentication-modal__container">
    <figure class="authentication-modal__image-container">
      <img class="authentication-modal__image" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/https___dev-to-uploads.s3.amazonaws(1).com_uploads_articles_8j7kvp660rqzt99zui8e.png" alt="DEV Community" loading="lazy">
    </figure>
    <div class="authentication-modal__content">
      <p class="authentication-modal__description">
          We're a place where coders share, stay up-to-date and grow their careers.
      </p>
    </div>
    <div class="authentication-modal__actions">
      <a href="https://dev.to/enter" class="crayons-btn" aria-label="Log in" data-no-instant="">
        Log in
      </a>
      <a href="https://dev.to/enter?state=new-user" class="crayons-btn crayons-btn--ghost-brand js-global-signup-modal__create-account" aria-label="Create new account" data-no-instant="">
        Create account
      </a>
    </div>
  </div>
</div>

<script src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/signupModalShortcuts-0b25469b985100a01e94cbd7fccaf7f0a4d776e129aac65c766aa32cb28ab29a.js.download" defer="defer"></script>

    <div id="cookie-consent"></div>
  <div id="i18n-translations" data-translations="{&quot;en&quot;:{&quot;core&quot;:{&quot;add_comment&quot;:&quot;Add comment&quot;,&quot;beta&quot;:&quot;beta&quot;,&quot;comment&quot;:&quot;Comment&quot;,&quot;copy_link&quot;:&quot;Copy link&quot;,&quot;edit_profile&quot;:&quot;Edit profile&quot;,&quot;follow&quot;:&quot;Follow&quot;,&quot;follow_back&quot;:&quot;Follow back&quot;,&quot;following&quot;:&quot;Following&quot;,&quot;like&quot;:&quot;Like&quot;,&quot;loading&quot;:&quot;loading...&quot;,&quot;reaction&quot;:&quot;Reaction&quot;,&quot;report_abuse&quot;:&quot;Report abuse&quot;,&quot;search&quot;:&quot;Search&quot;,&quot;success_settings&quot;:&quot;Successfully updated settings.&quot;,&quot;counted_organization&quot;:{&quot;one&quot;:&quot;%{count} organization&quot;,&quot;other&quot;:&quot;%{count} organizations&quot;},&quot;counted_user&quot;:{&quot;one&quot;:&quot;%{count} person&quot;,&quot;other&quot;:&quot;%{count} people&quot;},&quot;not_following&quot;:&quot;You&#39;re not following anyone&quot;,&quot;following_everyone&quot;:&quot;You&#39;re following %{details} (everyone)&quot;,&quot;you_are_following&quot;:&quot;You&#39;re following&quot;,&quot;and&quot;:&quot;and&quot;}}}"></div>
  <div id="reaction-category-resources" class="hidden" aria-hidden="true">
    <img data-name="Like" data-slug="like" data-position="1" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/sparkle-heart-5f9bee3767e18deb1bb725290cb151c25234768a0e9a2bd39370c382d02920cf.svg" width="18" height="18">
    <img data-name="Unicorn" data-slug="unicorn" data-position="2" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/multi-unicorn-b44d6f8c23cdd00964192bedc38af3e82463978aa611b4365bd33a0f1f4f3e97.svg" width="18" height="18">
    <img data-name="Exploding Head" data-slug="exploding_head" data-position="3" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/exploding-head-daceb38d627e6ae9b730f36a1e390fca556a4289d5a41abb2c35068ad3e2c4b5.svg" width="18" height="18">
    <img data-name="Raised Hands" data-slug="raised_hands" data-position="4" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/raised-hands-74b2099fd66a39f2d7eed9305ee0f4553df0eb7b4f11b01b6b1b499973048fe5.svg" width="18" height="18">
    <img data-name="Fire" data-slug="fire" data-position="5" src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/fire-f60e7a582391810302117f987b22a8ef04a2fe0df7e3258a5f49332df1cec71e.svg" width="18" height="18">
</div>

    <script>
  var userSignedIn = false;
  if (document.readyState === 'complete' || document.readyState === 'interactive') {
    initAuth();
  } else {
    document.addEventListener('DOMContentLoaded', initAuth);
  }

  function initAuth() {
    var paramToken = new URLSearchParams(window.location.search).get('jwt');

    if (paramToken && !userSignedIn) {
      authenticateUser(paramToken);
    } else {
      var iframe = document.createElement('iframe');
      iframe.style.display = 'none';
      iframe.src = 'https://forem.com/auth_pass/iframe';
  
      document.body.appendChild(iframe);
  
      window.addEventListener('message', function(event) {
        if (event.origin !== 'https://forem.com' && event.origin !== window.location.origin) {
          return;
        }
  
        var data = event.data;
  
        if (data.authenticated && !userSignedIn) {
          authenticateUser(data.token);
        } else if(data.authenticated && window.ReactNativeWebView && window.ReactNativeWebView.postMessage) {
          window.ReactNativeWebView.postMessage(JSON.stringify({
            action: 'login',
            token: data.token,
          }));
        }
      });  
    }

    function authenticateUser(token) {
      fetch('/auth_pass/token_login', {
        method: 'POST',
        credentials: 'include',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRF-Token': getMetaContent('csrf-token'),
        },
        body: JSON.stringify({ token: token }),
      })
      .then(function(response) {
        return response.json();
      })
      .then(function(data) {
        if (data.success) {
          if (document.head.querySelector('meta[name="user-signed-in"][content="false"]')) {
            // Reload the page to update the user's state
            location.reload();
          }
        }
      })
      .catch(function(error) {
        console.error('Error during authentication:', error);
      });
    }

    function getMetaContent(name) {
      var element = document.querySelector('meta[name="' + name + '"]');
      return element ? element.getAttribute('content') : '';
    }
  }
</script>

  
  
  
<iframe src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/iframe.html" style="display: none;"></iframe><iframe src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/iframe(1).html" style="display: none;"></iframe><iframe src="./Go_ Deep dive into net package learning from TCP server - DEV Community_files/iframe(2).html" style="display: none;"></iframe></body></html>